<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>admin_member</title>
    <link rel="stylesheet" href="../../static/components/button.css">
</head>
<body>
  <header>
      <div th:replace="~{layouts/admin_header.html}"></div>
  </header>
  <script>
    async function includeWithScripts(targetSelector, url) {
      const res = await fetch(url, { credentials: 'same-origin' });
      if (!res.ok) throw new Error(`Failed to load ${url}`);
      const html = await res.text();

      const target = document.querySelector(targetSelector);
      target.innerHTML = html;

      // 삽입된 영역 안의 <script>들을 실행되도록 교체
      const scripts = target.querySelectorAll('script');
      for (const oldScript of scripts) {
        const newScript = document.createElement('script');

        // type, src, async, defer 등 속성 복사
        for (const { name, value } of [...oldScript.attributes]) {
          newScript.setAttribute(name, value);
        }
        // inline 스크립트라면 코드 복사
        if (!oldScript.src) newScript.text = oldScript.textContent;

        // 실행을 위해 문서에 부착
        // (src가 있으면 네트워크 로드, 없으면 즉시 실행)
        oldScript.replaceWith(newScript);

        // src 스크립트 로드를 기다려야 한다면:
        if (newScript.src) {
          await new Promise((res) => {
            newScript.addEventListener('load', res, { once: true });
            newScript.addEventListener('error', res, { once: true });
          });
        }
      }
    }

    // (2) includeWithScripts - 올바른 방법
    includeWithScripts('#header', '/layouts/admin_header.html')
    .then(() => {
      // 환경설정 메뉴 활성화
      window.initAdminHeader && window.initAdminHeader('member');
    })
    .catch(console.error);
    document.addEventListener('DOMContentLoaded', () => {
        if (window.initAdminHeader) window.initAdminHeader('member');
    });
  </script>

  <main style="background-color: #F6F6F8; display: flex; justify-content: center;">
    <div style="width: 1200px; ">
      <div>
        <div style="font-size: 24px; color: #4B5563;">회원관리</div>
        <div style="display: flex;">
          <div style="font-size: 16px; color: #4B5563;">회원 현황을 확인하고 관리할 수 있습니다.</div>
          <div style="margin-left: auto; display: flex; justify-content: center; align-items: center; font-size: 14px; background-color: white; width: 165px; height: 40px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); border: 1px solid #E5E7EB;">
            <div style="display: flex; align-items: center;">
              <svg width="20" height="16" viewBox="0 0 20 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g clip-path="url(#clip0_194_44)">
                <path d="M7 8C8.06087 8 9.07828 7.57857 9.82843 6.82843C10.5786 6.07828 11 5.06087 11 4C11 2.93913 10.5786 1.92172 9.82843 1.17157C9.07828 0.421427 8.06087 0 7 0C5.93913 0 4.92172 0.421427 4.17157 1.17157C3.42143 1.92172 3 2.93913 3 4C3 5.06087 3.42143 6.07828 4.17157 6.82843C4.92172 7.57857 5.93913 8 7 8ZM5.57188 9.5C2.49375 9.5 0 11.9937 0 15.0719C0 15.5844 0.415625 16 0.928125 16H13.0719C13.1281 16 13.1813 15.9938 13.2375 15.9844C10.8531 14.2625 10.1187 11.5781 10.0156 9.72812C9.5125 9.57812 8.98125 9.5 8.43125 9.5H5.57188ZM15.2219 7.05312L11.4719 8.55313C11.1875 8.66875 11 8.94375 11 9.25C11 11.2281 11.8094 14.525 15.2125 15.9438C15.3969 16.0219 15.6062 16.0219 15.7906 15.9438C19.1906 14.525 20 11.2281 20 9.25C20 8.94375 19.8125 8.66875 19.5281 8.55313L15.7781 7.05312C15.6 6.98125 15.4 6.98125 15.2219 7.05312ZM18.4813 9.75C18.3594 11.3344 17.6312 13.3969 15.5 14.4281V8.55625L18.4813 9.75Z" fill="#E6002D"/>
                </g>
                <defs>
                <clipPath id="clip0_194_44">
                <path d="M0 0H20V16H0V0Z" fill="white"/>
                </clipPath>
                </defs>
              </svg>
              <div style="margin-left: 10px;">관리자: Admin</div>
            </div>
          </div>
        </div>
        <div style="display: flex; margin-top: 25px;">
          <div style="background-color: white; width: 280px; height: 136px; border-radius: 16px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); border: 1px solid #E5E7EB;">
            <div style="padding: 21px;">
              <div>
                <div style="display: flex; ">
                  <div>
                    <div style="font-size: 14px; color: #6B7280;">전체회원</div>
                    <div style="font-size: 24px; color: #2B2F36;"><span th:text="${countAllUsers}"></span></div>
                  </div>
                  <div style="display: flex; align-items: center; justify-content: center; margin-left: auto;border-radius: 8px; background-color: #f8e6e6; width: 48px; height: 48px;">
                    <svg width="25" height="20" viewBox="0 0 25 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <g clip-path="url(#clip0_191_191)">
                      <path d="M5.625 0C6.4538 0 7.24866 0.32924 7.83471 0.915291C8.42076 1.50134 8.75 2.2962 8.75 3.125C8.75 3.9538 8.42076 4.74866 7.83471 5.33471C7.24866 5.92076 6.4538 6.25 5.625 6.25C4.7962 6.25 4.00134 5.92076 3.41529 5.33471C2.82924 4.74866 2.5 3.9538 2.5 3.125C2.5 2.2962 2.82924 1.50134 3.41529 0.915291C4.00134 0.32924 4.7962 0 5.625 0ZM20 0C20.8288 0 21.6237 0.32924 22.2097 0.915291C22.7958 1.50134 23.125 2.2962 23.125 3.125C23.125 3.9538 22.7958 4.74866 22.2097 5.33471C21.6237 5.92076 20.8288 6.25 20 6.25C19.1712 6.25 18.3763 5.92076 17.7903 5.33471C17.2042 4.74866 16.875 3.9538 16.875 3.125C16.875 2.2962 17.2042 1.50134 17.7903 0.915291C18.3763 0.32924 19.1712 0 20 0ZM0 11.668C0 9.36719 1.86719 7.5 4.16797 7.5H5.83594C6.45703 7.5 7.04688 7.63672 7.57812 7.87891C7.52734 8.16016 7.50391 8.45312 7.50391 8.75C7.50391 10.2422 8.16016 11.582 9.19531 12.5C9.1875 12.5 9.17969 12.5 9.16797 12.5H0.832031C0.375 12.5 0 12.125 0 11.668ZM15.832 12.5C15.8242 12.5 15.8164 12.5 15.8047 12.5C16.8438 11.582 17.4961 10.2422 17.4961 8.75C17.4961 8.45312 17.4688 8.16406 17.4219 7.87891C17.9531 7.63281 18.543 7.5 19.1641 7.5H20.832C23.1328 7.5 25 9.36719 25 11.668C25 12.1289 24.625 12.5 24.168 12.5H15.832ZM8.75 8.75C8.75 7.75544 9.14509 6.80161 9.84835 6.09835C10.5516 5.39509 11.5054 5 12.5 5C13.4946 5 14.4484 5.39509 15.1517 6.09835C15.8549 6.80161 16.25 7.75544 16.25 8.75C16.25 9.74456 15.8549 10.6984 15.1517 11.4017C14.4484 12.1049 13.4946 12.5 12.5 12.5C11.5054 12.5 10.5516 12.1049 9.84835 11.4017C9.14509 10.6984 8.75 9.74456 8.75 8.75ZM5 18.957C5 16.082 7.33203 13.75 10.207 13.75H14.793C17.668 13.75 20 16.082 20 18.957C20 19.5312 19.5352 20 18.957 20H6.04297C5.46875 20 5 19.5352 5 18.957Z" fill="#D91A1A"/>
                      </g>
                      <defs>
                      <clipPath id="clip0_191_191">
                      <path d="M0 0H25V20H0V0Z" fill="white"/>
                      </clipPath>
                      </defs>
                    </svg>
                  </div>
                </div>
                <div style="display: flex; align-items: center; margin-top: 20px;">
                   <div style="width: 6px; height: 6px; background-color: #D91A1A; border-radius: 100%; margin-right: 7px;"></div>
                  <div style="font-size: 12px; color: #4B5563;">총 회원 수</div>
                </div>
              </div>
            </div>
          </div>
          <div style="background-color: white;width: 285px; height: 136px; border-radius: 16px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); border: 1px solid #E5E7EB;
          margin-left: 25px;">
            <div style="padding: 21px;">
              <div>
                <div style="display: flex; ">
                  <div>
                    <div style="font-size: 14px; color: #6B7280;">신규가입</div>
                    <div style="font-size: 24px; color: #2B2F36;"><span th:text="${countSixMonthUsers}"></span></div>
                  </div>
                  <div style="display: flex; justify-content: center; align-items: center; margin-left: auto;border-radius: 8px; background-color: #ddfced; width: 48px; height: 48px;">
                    <svg width="25" height="28" viewBox="0 0 25 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <g clip-path="url(#clip0_191_149)">
                      <path d="M3.75 9.5C3.75 8.17392 4.27678 6.90215 5.21447 5.96447C6.15215 5.02678 7.42392 4.5 8.75 4.5C10.0761 4.5 11.3479 5.02678 12.2855 5.96447C13.2232 6.90215 13.75 8.17392 13.75 9.5C13.75 10.8261 13.2232 12.0979 12.2855 13.0355C11.3479 13.9732 10.0761 14.5 8.75 14.5C7.42392 14.5 6.15215 13.9732 5.21447 13.0355C4.27678 12.0979 3.75 10.8261 3.75 9.5ZM0 23.3398C0 19.4922 3.11719 16.375 6.96484 16.375H10.5352C14.3828 16.375 17.5 19.4922 17.5 23.3398C17.5 23.9805 16.9805 24.5 16.3398 24.5H1.16016C0.519531 24.5 0 23.9805 0 23.3398ZM19.6875 16.6875V14.1875H17.1875C16.668 14.1875 16.25 13.7695 16.25 13.25C16.25 12.7305 16.668 12.3125 17.1875 12.3125H19.6875V9.8125C19.6875 9.29297 20.1055 8.875 20.625 8.875C21.1445 8.875 21.5625 9.29297 21.5625 9.8125V12.3125H24.0625C24.582 12.3125 25 12.7305 25 13.25C25 13.7695 24.582 14.1875 24.0625 14.1875H21.5625V16.6875C21.5625 17.207 21.1445 17.625 20.625 17.625C20.1055 17.625 19.6875 17.207 19.6875 16.6875Z" fill="#1CB26C"/>
                      </g>
                      <defs>
                      <clipPath id="clip0_191_149">
                      <path d="M0 4.5H25V24.5H0V4.5Z" fill="white"/>
                      </clipPath>
                      </defs>
                    </svg>
                  </div>
                </div>
                <div style="display: flex; align-items: center; margin-top: 20px;">
                  <div style="width: 6px; height: 6px; background-color: #1CB26C; border-radius: 100%; margin-right: 7px;"></div>
                  <div style="font-size: 12px; color: #4B5563;">신규 유입 회원</div>
                </div>
              </div>
            </div>
          </div>
          <div style="background-color: white;width: 285px; height: 136px; border-radius: 16px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); border: 1px solid #E5E7EB;
          margin-left: 25px;">
            <div style="padding: 21px;">
              <div>
                <div style="display: flex; ">
                  <div>
                    <div style="font-size: 14px; color: #6B7280;">휴면</div>
                    <div style="font-size: 24px; color: #2B2F36;"><span th:text="${countWait}"></span></div>
                  </div>
                  <div style="display: flex; justify-content: center; align-items: center; margin-left: auto;border-radius: 8px; background-color: #f5f6f7; width: 48px; height: 48px;">
                    <svg width="25" height="20" viewBox="0 0 25 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <g clip-path="url(#clip0_191_197)">
                      <path d="M8.75 0C10.0761 0 11.3479 0.526784 12.2855 1.46447C13.2232 2.40215 13.75 3.67392 13.75 5C13.75 6.32608 13.2232 7.59785 12.2855 8.53553C11.3479 9.47322 10.0761 10 8.75 10C7.42392 10 6.15215 9.47322 5.21447 8.53553C4.27678 7.59785 3.75 6.32608 3.75 5C3.75 3.67392 4.27678 2.40215 5.21447 1.46447C6.15215 0.526784 7.42392 0 8.75 0ZM6.96484 11.875H10.5352C11.3398 11.875 12.1133 12.0117 12.832 12.2617C12.6172 12.9297 12.5 13.6367 12.5 14.375C12.5 16.6992 13.6523 18.7539 15.4219 20H1.16016C0.519531 20 0 19.4805 0 18.8398C0 14.9922 3.11719 11.875 6.96484 11.875ZM13.75 14.375C13.75 12.8832 14.3426 11.4524 15.3975 10.3975C16.4524 9.34263 17.8832 8.75 19.375 8.75C20.8668 8.75 22.2976 9.34263 23.3525 10.3975C24.4074 11.4524 25 12.8832 25 14.375C25 15.8668 24.4074 17.2976 23.3525 18.3525C22.2976 19.4074 20.8668 20 19.375 20C17.8832 20 16.4524 19.4074 15.3975 18.3525C14.3426 17.2976 13.75 15.8668 13.75 14.375ZM19.375 11.25C19.0312 11.25 18.75 11.5312 18.75 11.875V14.375C18.75 14.7188 19.0312 15 19.375 15H21.25C21.5938 15 21.875 14.7188 21.875 14.375C21.875 14.0312 21.5938 13.75 21.25 13.75H20V11.875C20 11.5312 19.7188 11.25 19.375 11.25Z" fill="#C8CBD0"/>
                      </g>
                      <defs>
                      <clipPath id="clip0_191_197">
                      <path d="M0 0H25V20H0V0Z" fill="white"/>
                      </clipPath>
                      </defs>
                    </svg>
                  </div>
                </div>
                <div style="display: flex; align-items: center; margin-top: 20px;">
                  <div style="width: 6px; height: 6px; background-color: #C8CBD0; border-radius: 100%; margin-right: 7px;"></div>
                  <div style="font-size: 12px; color: #4B5563;">장기 미접속 회원</div>
                </div>
              </div>
            </div>
          </div>
          <div style="background-color: white;width: 285px; height: 136px; border-radius: 16px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); border: 1px solid #E5E7EB;
          margin-left: 25px;">
            <div style="padding: 21px;">
              <div>
                <div style="display: flex; ">
                  <div>
                    <div style="font-size: 14px; color: #6B7280;">탈퇴</div>
                    <div style="font-size: 24px; color: #2B2F36;"><span th:text="${countWithdrawal}"></span></div>
                  </div>
                  <div style="display: flex; justify-content: center; align-items: center; margin-left: auto;border-radius: 8px; background-color: #f8ebda; width: 48px; height: 48px;">
                    <svg width="25" height="28" viewBox="0 0 25 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M25 28H0V0H25V28Z" stroke="#E5E7EB"/>
                      <g clip-path="url(#clip0_191_151)">
                      <path d="M3.75 9.5C3.75 8.17392 4.27678 6.90215 5.21447 5.96447C6.15215 5.02678 7.42392 4.5 8.75 4.5C10.0761 4.5 11.3479 5.02678 12.2855 5.96447C13.2232 6.90215 13.75 8.17392 13.75 9.5C13.75 10.8261 13.2232 12.0979 12.2855 13.0355C11.3479 13.9732 10.0761 14.5 8.75 14.5C7.42392 14.5 6.15215 13.9732 5.21447 13.0355C4.27678 12.0979 3.75 10.8261 3.75 9.5ZM0 23.3398C0 19.4922 3.11719 16.375 6.96484 16.375H10.5352C14.3828 16.375 17.5 19.4922 17.5 23.3398C17.5 23.9805 16.9805 24.5 16.3398 24.5H1.16016C0.519531 24.5 0 23.9805 0 23.3398ZM18.4375 12.3125H24.0625C24.582 12.3125 25 12.7305 25 13.25C25 13.7695 24.582 14.1875 24.0625 14.1875H18.4375C17.918 14.1875 17.5 13.7695 17.5 13.25C17.5 12.7305 17.918 12.3125 18.4375 12.3125Z" fill="#FF8B00"/>
                      </g>
                      <defs>
                      <clipPath id="clip0_191_151">
                      <path d="M0 4.5H25V24.5H0V4.5Z" fill="white"/>
                      </clipPath>
                      </defs>
                    </svg>
                  </div>
                </div>
                <div style="display: flex; align-items: center; margin-top: 20px;">
                  <div style="width: 6px; height: 6px; background-color: #FF8B00; border-radius: 100%; margin-right: 7px;"></div>
                  <div style="font-size: 12px; color: #4B5563;">서비스 이탈</div>
                </div>
              </div>
            </div>
          </div>
          <script>
            window.addEventListener('DOMContentLoaded', () => {
              // 숫자 표시 영역 선택 (font-size: 24px이 공통) - 3자리수마다 ,를 추가
              const numberDivs = document.querySelectorAll('div[style*="font-size: 24px"]');

              numberDivs.forEach(div => {
                const text = div.textContent.trim();
                if (/^\d+$/.test(text)) { // 숫자만 있을 때
                  div.textContent = Number(text).toLocaleString('ko-KR');
                }
              });
            });
          </script>
        </div>
      </div>
      <div style="margin-top:25px; padding:30px; padding-top: 25px; box-sizing: border-box; background-color: white; width: 100%;  border-radius: 16px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); border: 1px solid #E5E7EB;">
          <form th:action="@{/admin/member/search}" method="get">
            <div style="display: flex; gap: 20px;">
              <div>
                <div style="font-size: 16px; color: #2B2F36;">이름</div>
                <div>
                  <input class="input--ph-gray" name="mname" placeholder="이름을 입력하세요" type="text" style="margin-top: 13px; box-sizing: border-box; outline:none; padding-left:15px; font-size: 14px; width: 256px; height: 42px; border:1px solid #D1D5DB; border-radius: 6px;">
                </div>
              </div>
              <div>
                <div style="font-size: 16px; color: #2B2F36;">이메일</div>
                <div>
                  <input class="input--ph-gray" name="memail" placeholder="이메일을 입력하세요" type="text" style="margin-top: 13px; box-sizing: border-box; outline:none; padding-left:15px; font-size: 14px; width: 256px; height: 42px; border:1px solid #D1D5DB; border-radius: 6px;">
                </div>
              </div>
              <div>
                <div style="font-size: 16px; color: #2B2F36;">상태</div>
                <div>
                  <select name="mcond" id="" style="margin-top: 13px; box-sizing: border-box; outline:none; padding-left:10px; font-size: 14px; width: 256px; height: 42px; border:1px solid #D1D5DB; border-radius: 6px;">
                    <option value="all">전체</option>
                    <option value="활동중">활동중</option>
                    <option value="휴면">휴면</option>
                    <option value="탈퇴">탈퇴</option>
                  </select>
                </div>
              </div>
              <div style="display: flex; gap: 10px; margin-left: auto;">
                <div style="margin-top: auto;">
                  <button type="submit" class="btn-register" style="gap:6px; box-sizing: border-box; width: 90px; height: 42px; background-color: #D91A1A; color: white; border:none; border-radius: 8px; cursor: pointer;">
                    <div style="display: flex; justify-content: center; align-items: center; gap: 8px;">
                      <svg  width="16" height="24" viewBox="0 0 16 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g clip-path="url(#clip0_191_162)">
                        <path d="M13 11.5C13 12.9344 12.5344 14.2594 11.75 15.3344L15.7063 19.2937C16.0969 19.6844 16.0969 20.3188 15.7063 20.7094C15.3156 21.1 14.6812 21.1 14.2906 20.7094L10.3344 16.75C9.25938 17.5375 7.93437 18 6.5 18C2.90937 18 0 15.0906 0 11.5C0 7.90937 2.90937 5 6.5 5C10.0906 5 13 7.90937 13 11.5ZM6.5 16C7.09095 16 7.67611 15.8836 8.22208 15.6575C8.76804 15.4313 9.26412 15.0998 9.68198 14.682C10.0998 14.2641 10.4313 13.768 10.6575 13.2221C10.8836 12.6761 11 12.0909 11 11.5C11 10.9091 10.8836 10.3239 10.6575 9.77792C10.4313 9.23196 10.0998 8.73588 9.68198 8.31802C9.26412 7.90016 8.76804 7.56869 8.22208 7.34254C7.67611 7.1164 7.09095 7 6.5 7C5.90905 7 5.32389 7.1164 4.77792 7.34254C4.23196 7.56869 3.73588 7.90016 3.31802 8.31802C2.90016 8.73588 2.56869 9.23196 2.34254 9.77792C2.1164 10.3239 2 10.9091 2 11.5C2 12.0909 2.1164 12.6761 2.34254 13.2221C2.56869 13.768 2.90016 14.2641 3.31802 14.682C3.73588 15.0998 4.23196 15.4313 4.77792 15.6575C5.32389 15.8836 5.90905 16 6.5 16Z" fill="white"/>
                        </g>
                        <defs>
                        <clipPath id="clip0_191_162">
                        <path d="M0 5H16V21H0V5Z" fill="white"/>
                        </clipPath>
                        </defs>
                      </svg>
                      <div>
                        검색
                      </div>
                    </div>
                  </button>
                </div>
                <div style="margin-top: auto;">
                  <button th:onclick="|location.href='@{/admin/member}'|"
                          type="button"
                          class="btn-pressable btn-sheen" style="box-sizing: border-box; width: 90px; height: 42px; border:none; border-radius: 8px; cursor: pointer; border:1px solid #D1D5DB; background-color: white;">초기화</button>
                </div>
              </div>
            </div>
          </form>
      </div>
      <style>
        .btn-register {
          --bg1: #D91A1A;
          --bg2: #F03A3A;
          --shadow: rgba(217,26,26,.45);
          position: relative;
          box-sizing: border-box;
          width: 90px; height: 42px;
          border: none; border-radius: 8px;
          color: #fff; cursor: pointer;
          background: linear-gradient(180deg, var(--bg2), var(--bg1));
          outline: none;
          box-shadow: 0 6px 14px -10px var(--shadow);
          transition:
            background .18s ease,
            box-shadow .18s ease,
            transform .12s ease; /* 프레스만 사용할 예정 */
          will-change: background, box-shadow, transform;
        }

        /* Hover: 컬러와 섀도우만 아주 미세하게 (리프트 없음) */
        .btn-register:hover {
          background: linear-gradient(180deg, #f24a4a, #d61a1a);
          box-shadow: 0 8px 18px -12px var(--shadow);
          transform: none; /* 확실하게 떠오르지 않도록 고정 */
        }

        /* Active: 살짝 눌리는 프레스 효과만 */
        .btn-register:active {
          transform: scale(.98);
          box-shadow: 0 4px 10px -10px var(--shadow);
        }

        /* 키보드 포커스 접근성 */
        .btn-register:focus-visible {
          outline: 3px solid rgba(240,58,58,.55);
          outline-offset: 2px;
        }

        /* 모션 최소화 존중 */
        @media (prefers-reduced-motion: reduce) {
          .btn-register { transition: none !important; }
        }

        @media (prefers-color-scheme: dark) {
          .btn-register { --shadow: rgba(240,58,58,.35); }
        }
      </style>
      <style>
        /* 이 클래스가 붙은 input의 placeholder만 색 변경 */
        .input--ph-gray::placeholder { color: #ADAEBC; opacity: 1; } /* 표준 */
        .input--ph-gray::-webkit-input-placeholder { color: #ADAEBC; } /* Safari/옛 크롬 */
        .input--ph-gray::-moz-placeholder { color: #ADAEBC; opacity: 1; } /* Firefox */
        .input--ph-gray:-ms-input-placeholder { color: #ADAEBC; } /* IE10-11 */
        .input--ph-gray::-ms-input-placeholder { color: #ADAEBC; } /* 옛 Edge */
      </style>
      <div style="margin-top:25px;border-radius: 16px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); border: 1px solid #E5E7EB; overflow: hidden;">
        <table style="border-collapse: collapse; width: 100%;">
          <tr style="color: #2B2F36; font-size: 14px; height: 52px; border-bottom: 1px #E5E7EB;">
            <th style="width:170px;">ID</th>
            <th style="width:170px;">이름</th>
            <th style="width:280px;">이메일</th>
            <th style="width:170px;">가입일</th>
            <th style="width:200px;">등급</th>
            <th style="">상태</th>
          </tr>
          <tr style="font-size: 14px; text-align: center; height: 63.5px; background-color: white;"
          th:each="user, stat:${pageResponseDTO.dtoList}">
            <td><span th:text="${pageResponseDTO.total - ( (pageResponseDTO.pg - 1) * pageResponseDTO.size + stat.index )}"></span></td>
            <td><span th:text="${user.mname}"></span></td>
            <td><span th:text="${user.memail}"></span></td>
            <td><span th:text="${#temporals.format(user.mdate, 'yyyy-MM-dd')}"></span></td>
            <td>
                <div class="status-badge"><span th:text="${user.mgrade}"></span></div>
            </td>
            <td style="vertical-align: middle; text-align: center;">
                <span th:text="${user.mcond}"></span>
            </td>
          </tr>
        </table>
        <script>
          window.addEventListener('DOMContentLoaded', () => {
            // 상태 텍스트 → 배지 스타일 매핑
            const BADGE = {
              '활동중': { color:'#1CB26C', bg:'#ddfced', w:57, h:22 },
              '휴면'  : { color:'#C8CBD0', bg:'#f5f6f7', w:46, h:24 },
              '탈퇴'  : { color:'#FF8B00', bg:'#f8ebda', w:46, h:24 },
            };

            // 테이블의 5번째 컬럼(상태) 모든 셀을 순회
            document.querySelectorAll('table tr td:nth-child(6)').forEach(td => {
              const status = td.textContent.trim();   // 셀 안의 상태 텍스트
              const s = BADGE[status];
              if (!s) return; // 매핑 없으면 패스

              td.innerHTML = `
                <div style="
                  margin:auto; font-size:12px; color:${s.color};
                  background-color:${s.bg}; border-radius:20px;
                  width:${s.w}px; height:${s.h}px;
                  display:flex; justify-content:center; align-items:center;">
                  ${status}
                </div>`;
            });
          });
          ///////////////////////////////////
          // 상태 필터
          const $filter = document.querySelector('select[name="condition"]');

          // value → 표시 텍스트 매핑
          const MAP = {
            active: '활동중',
            inactivity: '휴면',
            withdrawl: '탈퇴'
          };

          function applyStatusFilter() {
            const val = $filter.value;               // all | active | inactivity | withdrawl
            const want = MAP[val];                   // undefined면 '전체' 의미

            // 헤더를 제외한 모든 행에 대해 필터링
            document.querySelectorAll('table tr').forEach((tr, i) => {
              if (i === 0) return; // 헤더 행 건너뛰기
              const status = tr.querySelector('td:nth-of-type(5)')?.textContent.trim();
              const show = (val === 'all') || (status === want);
              tr.style.display = show ? '' : 'none';
            });
          }

          // 초기 적용 + 변경 시 적용
          $filter.addEventListener('change', applyStatusFilter);
          document.addEventListener('DOMContentLoaded', applyStatusFilter);
        </script>
          <script>
              window.addEventListener('DOMContentLoaded', () => {
                  const BADGE = {
                      'Royal VIP': { color:'white', bg:'#3c4249', w:57, h:22 },
                      'Gold VIP'  : { color:'#B8860B', bg:'#FFF6DC', w:46, h:24 },
                      'Silver VIP': { color:'#6B7280', bg:'#F3F4F6', w:46, h:24 },
                      'Green VIP' : { color:'#15803D', bg:'#DCFCE7', w:46, h:24 },
                      'Family'    : { color:'#2563EB', bg:'#DBEAFE', w:46, h:24 },
                  };

                  document.querySelectorAll('.status-badge').forEach(el => {
                      const key = el.textContent.trim();
                      const s = BADGE[key];
                      if (!s) return;

                      Object.assign(el.style, {
                          display: 'inline-flex',
                          justifyContent: 'center',
                          alignItems: 'center',
                          padding: '0 8px',
                          fontSize: '12px',
                          fontWeight: '500',
                          lineHeight: '1',
                          color: s.color,
                          backgroundColor: s.bg,
                          borderRadius: '20px',
                          height: s.h + 'px',
                          minWidth: s.w + 'px',
                          boxSizing: 'border-box',
                      });
                  });
              });
          </script>
      </div>
        <div class="pager" style="width: 100%;margin-top: 25px; display:grid; grid-template-columns: 1fr auto 1fr; align-items:center;">
            <div style="display: flex; grid-column: 2; width: 100%;">
                <a th:if="${pageResponseDTO.prev}" th:href="@{/admin/member(pg=${pageResponseDTO.pg - 1})}" class="prev page-btn page-prev" style="margin-right: 8px;">
                    <!-- 이전 아이콘 -->
                    <svg width="10" height="16" viewBox="0 0 10 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M0.293701 7.29414C-0.0969238 7.68477 -0.0969238 8.31914 0.293701 8.70977L6.2937 14.7098C6.68433 15.1004 7.3187 15.1004 7.70933 14.7098C8.09995 14.3191 8.09995 13.6848 7.70933 13.2941L2.41558 8.00039L7.7062 2.70664C8.09683 2.31602 8.09683 1.68164 7.7062 1.29102C7.31558 0.900391 6.6812 0.900391 6.29058 1.29102L0.290576 7.29102L0.293701 7.29414Z" />
                    </svg>
                </a>
                <span th:unless="${pageResponseDTO.prev}" class="placeholder" aria-hidden="true"></span>

                <th:block th:each="num:${#numbers.sequence(pageResponseDTO.start, pageResponseDTO.end)}">
                    <a th:href="@{/admin/member(pg=${num})}" th:class="${num == pageResponseDTO.pg ? 'page-btn is-active' : 'page-btn'}" style="margin-right: 8px; text-decoration: none;">[[${num}]]</a>
                </th:block>

                <a th:if="${pageResponseDTO.next}" th:href="@{/admin/member(pg=${pageResponseDTO.pg + 1})}" class="next page-btn page-next">
                    <svg width="10" height="16" viewBox="0 0 10 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M9.70615 7.29414C10.0968 7.68477 10.0968 8.31914 9.70615 8.70977L3.70615 14.7098C3.31553 15.1004 2.68115 15.1004 2.29053 14.7098C1.8999 14.3191 1.8999 13.6848 2.29053 13.2941L7.58428 8.00039L2.29365 2.70664C1.90303 2.31602 1.90303 1.68164 2.29365 1.29102C2.68428 0.900391 3.31865 0.900391 3.70928 1.29102L9.70928 7.29102L9.70615 7.29414Z" fill="#2B2F36"/>
                    </svg>
                </a>
                <span th:unless="${pageResponseDTO.next}" class="placeholder" aria-hidden="true"></span>

            </div>
        </div>
      <style>
        .pager { gap: 8px; }
        .page-btn{
          width:42px; height:40px; border-radius:8px;
          border:1px solid transparent;
          background:#F6F6F8; color:#2B2F36; font-size:16px;
          display:flex; align-items:center; justify-content:center;
          cursor:pointer; transition:background .15s ease, box-shadow .15s ease, border-color .15s ease, color .15s ease;
        }
        .page-btn:hover{
          background:#FFFFFF;
          border-color:#E5E7EB;
          box-shadow:0 2px 8px rgba(0,0,0,.05);
        }
        .page-btn.is-active,
        .page-btn[aria-current="page"]{
          background:#FFFFFF;
          color:#D91A1A;
          border-color:#D91A1A;
          box-shadow:0 2px 8px rgba(217,26,26,.08);
          font-weight:600;
        }
        .page-btn:focus-visible{
          outline:none;
          box-shadow:0 0 0 3px rgba(217,26,26,.2);
        }
        /* 아이콘 색 */
        .page-btn svg path{ fill:#2B2F36; transition:opacity .15s ease, fill .15s ease; }
        .page-btn:hover svg path{ opacity:.9; }
        /* 비활성화가 필요할 경우 */
        .page-btn.is-disabled{ opacity:.4; pointer-events:none; }
        /* 자리만 차지하는 placeholder (hover/클릭 불가) */
        .placeholder{
            width:42px; height:40px; border-radius:8px;
            background:#F6F6F8;             /* 필요하면 투명으로 */
            margin-right:8px;                /* 이전쪽과 동일 간격 */
            pointer-events:none;             /* 클릭/hover 무시 */
            cursor:default;
            display:flex; align-items:center; justify-content:center;
            border:1px solid transparent;    /* 정렬용 테두리 두께 맞춤 */
            box-shadow:none;
        }
      </style>
      <script>
        document.addEventListener('DOMContentLoaded', () => {
          const pager = document.querySelector('.pager');
          if(!pager) return;

          pager.addEventListener('click', (e) => {
            const btn = e.target.closest('.page-btn');
            if(!btn || btn.classList.contains('page-prev') || btn.classList.contains('page-next')) return;

            pager.querySelectorAll('.page-btn').forEach(b=>{
              b.classList.remove('is-active');
              b.removeAttribute('aria-current');
            });
            btn.classList.add('is-active');
            btn.setAttribute('aria-current','page');
            // TODO: 실제 페이지 전환 로직 연결
          });
        });
      </script>
    </div>
  </main>

  <div id="bnk-chatbot-container" style="position: fixed; right: 20px; bottom: 20px; z-index: 9999;">
    <div id="bnk-chatbot-slot"></div>
  </div>
  <script>
  /**
   * 외부 HTML을 불러와서:
   *  - <link rel="stylesheet">, <style>는 <head>로 옮기고
   *  - <script>는 실행되도록 새로 만들어 붙이고 (src/inline, module 모두 지원)
   *  - 나머지 DOM(예: <flowise-chatbot> / <flowise-embed>)은 mount에 삽입
   */
  async function importHtmlWithAssets(url, mountSelector) {
    const res = await fetch(url, { credentials: 'same-origin' });
    if (!res.ok) throw new Error(`Failed to load ${url}`);
    const html = await res.text();

    const parser = new DOMParser();
    const doc = parser.parseFromString(html, 'text/html');

    // 1) <link rel="stylesheet"> 들을 <head>로
    doc.querySelectorAll('link[rel="stylesheet"]').forEach(link => {
      // 중복 로드 방지
      const href = link.getAttribute('href');
      if (href && ![...document.head.querySelectorAll('link[rel="stylesheet"]')]
        .some(l => l.getAttribute('href') === href)) {
        document.head.appendChild(link.cloneNode(true));
      }
    });

    // 2) <style> 들을 <head>로
    doc.querySelectorAll('style').forEach(styleEl => {
      const clone = document.createElement('style');
      // CSS 텍스트 보존
      clone.textContent = styleEl.textContent;
      // (가능한 속성 복사)
      [...styleEl.attributes].forEach(a => clone.setAttribute(a.name, a.value));
      document.head.appendChild(clone);
    });

    // 3) 본문 콘텐츠를 mount에 붙임 (스크립트 제외)
    const mount = document.querySelector(mountSelector);
    // fragment 구성
    const frag = document.createDocumentFragment();
    [...doc.body.children].forEach(node => {
      if (node.tagName.toLowerCase() !== 'script') frag.appendChild(node.cloneNode(true));
    });
    mount.appendChild(frag);

    // 4) 스크립트 실행 (src/inline/module 지원, 순서 보장)
    const scripts = [...doc.querySelectorAll('script')];
    for (const oldScript of scripts) {
      const newScript = document.createElement('script');
      // type/module/defer 등 속성 복사
      [...oldScript.attributes].forEach(attr => newScript.setAttribute(attr.name, attr.value));
      if (oldScript.src) {
        // 네트워크 로드를 기다려 실행 순서 유지
        await new Promise((resolve, reject) => {
          newScript.onload = resolve;
          newScript.onerror = resolve;   // 실패해도 진행(브랜딩 제거 같은 선택 기능 보호)
          document.body.appendChild(newScript);
        });
      } else {
        // inline 코드 복사
        newScript.textContent = oldScript.textContent || '';
        document.body.appendChild(newScript);
      }
    }
  }

  // 실제 호출: 기존 chatbot.html(또는 chatbot_test.html) 경로로 바꿔도 됩니다.
  importHtmlWithAssets('/components/chatbot_test.html', '#bnk-chatbot-slot')
    .catch(err => console.error('[Chatbot load failed]', err));
  </script>
  <footer>
      <div th:replace="~{layouts/footer.html}"></div>
  </footer>
</body>
</html>