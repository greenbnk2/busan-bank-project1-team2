<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" th:href="@{/components/button.css}">
  <title>admin_csModify</title>

  <!-- ==== ê¸°ì¡´ ìŠ¤íƒ€ì¼ ê·¸ëŒ€ë¡œ ìœ ì§€ ==== -->
  <style>
    .input-suffix {
      position: relative;
      display: inline-block;
      width: 557px;
      height: 42px;
    }
    .input-suffix input {
      box-sizing: border-box;
      width: 100%;
      height: 100%;
      padding-left: 15px;
      padding-right: 36px;
      font-size: 16px;
      border: 1px solid #D1D5DB;
      border-radius: 6px;
      outline: none;
    }
    .input-suffix .suffix {
      position: absolute;
      right: 12px;
      top: 47%;
      transform: translateY(-50%);
      color: #6B7280;
      pointer-events: none;
      font-size: 18px;
    }

    .input-suffix input[type="number"]::-webkit-outer-spin-button,
    .input-suffix input[type="number"]::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }
    .input-suffix input[type="number"] {
      -moz-appearance: textfield;
    }
  </style>
  <style>
    .date-range {
      margin-top: 13px;
      width: 557px;
      height: 42px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .date-field {
      position: relative;
      flex: 1 1 0;
      height: 42px;
    }
    .date-input {
      box-sizing: border-box;
      width: 100%;
      height: 100%;
      padding: 0 40px 0 12px;
      font-size: 14px;
      border: 1px solid #D1D5DB;
      border-radius: 6px;
      outline: none;
      background-color: #fff;
      color: #111827;
    }
    .date-input:focus {
      border-color: #9CA3AF;
      box-shadow: 0 0 0 3px rgba(156,163,175,.2);
    }
    .calendar-btn {
      position: absolute;
      right: 8px;
      top: 50%;
      transform: translateY(-50%);
      width: 28px;
      height: 28px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      border: none;
      background: transparent;
      cursor: pointer;
      color: #6B7280;
    }
    .calendar-btn:focus-visible {
      outline: 3px solid rgba(240,58,58,.55);
      border-radius: 6px;
      outline-offset: 2px;
    }
    .date-sep {
      color: #6B7280;
      font-size: 14px;
      user-select: none;
    }

    @media (prefers-color-scheme: dark) {
      .date-input {
        background: #111417;
        color: #E5E7EB;
        border-color: #2C3140;
      }
    }
  </style>
  <style>
    .date-input {
      appearance: none;
      -moz-appearance: none;
      -webkit-appearance: none;
    }
    .date-input::-webkit-calendar-picker-indicator { display: none; }
    .date-input::-webkit-clear-button,
    .date-input::-webkit-inner-spin-button { display: none; }

    .date-input::placeholder { color:#9CA3AF; }
  </style>
  <style>
    input,
    textarea {
      font-family: 'Noto Sans KR', 'Segoe UI', sans-serif;
      font-size: 16px;
      font-weight: 400;
      line-height: 1.4;
    }

    input::placeholder,
    textarea::placeholder {
      font-weight: 400;
      font-size: 16px;
      line-height: 1.4;
      opacity: 1;
    }
  </style>
  <style>
    .upload-card{
      margin-top: 13px;
      border:1px dashed #D1D5DB;
      border-radius:10px;
      background:#FBFBFD;
      min-height:200px;
      display:flex; align-items:center; justify-content:center;
      cursor:pointer;
      transition: background .18s ease, border-color .18s ease, box-shadow .18s ease;
    }
    .upload-card:hover{ background:#F8FAFC; border-color:#C7CED6; }
    .upload-card.is-dragover{
      background:#F3F4F6;
      border-color:#94A3B8;
      box-shadow:0 0 0 3px rgba(148,163,184,.15) inset;
    }
    .upload-inner{ text-align:center; padding:24px 16px; color:#6B7280; }
    .upload-title{ margin-top:8px; font-size:14px; color:#6B7280; }
    .upload-sub{ margin-top:4px; font-size:12px; color:#9CA3AF; }

    .upload-result{ margin-top:10px; font-size:14px; }
    .file-chip{
      display:inline-flex; align-items:center; gap:8px;
      padding:8px 10px; border:1px solid #E5E7EB; border-radius:8px;
      background:#FFFFFF; color:#374151;
    }
    .file-chip .size{ color:#6B7280; font-size:12px; }
    .file-remove{
      border:none; background:transparent; cursor:pointer; color:#9CA3AF;
    }
    .file-remove:hover{ color:#6B7280; }
    .error{ color:#B91C1C; margin-top:6px; }
  </style>

  <!-- ì¸ì‡„ ê´€ë ¨ ìŠ¤íƒ€ì¼ (ê·¸ëŒ€ë¡œ ìœ ì§€) -->
  <style>
    @page { size: A4; margin: 12mm; }

    @media print {
      #printRoot { width: 185mm !important; max-width: none !important; margin: 0 auto !important; }
      main { display:block !important; margin:0 !important; padding:0 !important; }
      html, body { overflow: visible !important; background:#fff !important; -webkit-print-color-adjust: exact; print-color-adjust: exact; }
      [style*="background-color: #F6F6F8"] { background:#fff !important; }

      [style*="padding: 25px"][style*="background-color: white"] {
        break-inside: avoid !important;
        page-break-inside: avoid !important;
        overflow: visible !important;
      }
      [style*="overflow: hidden"] { overflow: visible !important; }

      * { box-shadow:none !important; }
      [style*="border: 1px solid #E5E7EB"] { border-color:#D1D5DB !important; }

      .no-print, #header, #footer, #bnk-chatbot-container { display:none !important; }
      a[href]:after { content:""; }
    }

    @page { size: A4 portrait; margin: 0; }

    @media print {
      #printRoot {
        width: auto !important;
        max-width: 180mm !important;
        margin: 0 auto !important;
      }

      .date-range,
      .input-suffix,
      input, select, textarea {
        width: 100% !important;
      }

      [style*="padding: 25px"][style*="background-color: white"] {
        break-inside: avoid !important;
        page-break-inside: avoid !important;
        overflow: visible !important;
        border-radius: 8px;
      }
      [style*="overflow: hidden"] { overflow: visible !important; }

      html, body { -webkit-print-color-adjust: exact; print-color-adjust: exact; background:#fff !important; }
      * { box-shadow: none !important; }
      a[href]:after { content: ""; }
      .no-print, #header, #footer, #bnk-chatbot-container { display: none !important; }
      body { font: 12pt 'Noto Sans KR', sans-serif; color:#111827; }

      input, select, textarea {
        width: 100% !important;
        height: 10mm !important;
        line-height: 10mm !important;
        padding: 0 10px !important;
        border: 1px solid #D1D5DB !important;
        background: #fff !important;
        color:#111827 !important;
        box-shadow: none !important;
        appearance: none !important;
        -webkit-appearance: none !important;
      }
      textarea {
        min-height: 35mm !important;
        line-height: 1.5 !important;
        padding: 10px !important;
      }
      select::-ms-expand { display:none; }

      .input-suffix .suffix { right: 10px; top: 50%; transform: translateY(-50%); }

      #termsDropzone { display:none !important; }
      #termsResult { display:block !important; }

      [style*="padding: 25px"][style*="background-color: white"] {
        padding: 18px !important;
        break-inside: avoid !important;
        page-break-inside: avoid !important;
        overflow: visible !important;
        border-radius: 8px !important;
      }
      html, body { margin:0 !important; background:#fff !important; }
      #printRoot {
        max-width: 200mm !important;
        width: auto !important;
        margin: 0 auto !important;
        padding: 0 !important;
      }
    }

    @media print {
      #printRoot input,
      #printRoot select,
      #printRoot textarea {
        width: 100% !important;
        max-width: none !important;
        box-sizing: border-box !important;
      }

      #printRoot [style*="display: flex"][style*="gap: 25px"] > div {
        flex: 1 1 0 !important;
        min-width: 0 !important;
      }

      #printRoot .input-suffix { width: 100% !important; }
      #printRoot .input-suffix input { width: 100% !important; padding-right: 32px !important; }

      #printRoot .date-range { width: 100% !important; }
      #printRoot .date-field { flex: 1 1 0 !important; min-width: 0 !important; }
    }

    @media print {
      #printRoot textarea {
        display: block !important;
        width: 100% !important;
        max-width: none !important;
        box-sizing: border-box !important;
        padding: 10px 14px !important;
      }

      #printRoot textarea[style*="width: 1147px"] {
        width: 100% !important;
      }

      #printRoot [style*="display: flex"][style*="margin-top: 20px"] > div {
        width: 100% !important;
        flex: 1 1 0 !important;
        min-width: 0 !important;
      }
    }
  </style>
</head>

<body>
<header>
  <div th:replace="~{layouts/admin_header.html}"></div>
</header>

<script>
  // í—¤ë” ë©”ë‰´ í•˜ì´ë¼ì´íŠ¸ (cs)
  document.addEventListener('DOMContentLoaded', () => {
    if (window.initAdminHeader) window.initAdminHeader('cs');
  });
</script>

<main style="background-color: #F6F6F8; display: flex; justify-content: center;">
  <div id="printRoot" style="width: 1200px; ">

    <!-- ğŸ”¥ ìˆ˜ì • í¼ ì‹œì‘ -->
    <form th:action="@{/admin/cs/modify(group=${group}, type=${type})}"
          method="post"
          enctype="multipart/form-data">

      <!-- DOCID (PK) -->
      <input type="hidden" name="docid" th:value="${document.docid}"/>

      <!-- ìƒë‹¨ íƒ€ì´í‹€ ì˜ì—­ -->
      <div>
        <div style="display: flex; font-size: 24px; color: #4B5563;">
          <div>ê²Œì‹œê¸€ìˆ˜ì •</div>
        </div>
        <div style="display: flex;">
          <div style="font-size: 16px; color: #4B5563;">ì„ íƒí•œ ê²Œì‹œíŒì˜ ê²Œì‹œê¸€ ì •ë³´ë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.</div>
          <div style="display: flex; margin-left: auto; margin-right: 10px;">
            <button th:onclick="|location.href='@{/admin/cs(group=${group}, type=${type})}'|"
                    type="button"
                    class="btn-pressable btn-sheen"
                    style="box-sizing: border-box; width: 150px; height: 42.5px; border:none; border-radius: 8px; cursor: pointer; border-radius: 8px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); border: 1px solid #E5E7EB; background-color: white;">
              <div style="display: flex; gap: 8px; justify-content: center; align-content: center;">
                <div style="margin-top: 2px;">
                  <svg width="14" height="16" viewBox="0 0 14 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g clip-path="url(#clip0_454_42)">
                      <path d="M0.293701 7.29365C-0.0969238 7.68428 -0.0969238 8.31865 0.293701 8.70928L5.2937 13.7093C5.68433 14.0999 6.3187 14.0999 6.70933 13.7093C7.09995 13.3187 7.09995 12.6843 6.70933 12.2937L3.41245 8.9999H13C13.5531 8.9999 14 8.55303 14 7.9999C14 7.44678 13.5531 6.9999 13 6.9999H3.41558L6.7062 3.70615C7.09683 3.31553 7.09683 2.68115 6.7062 2.29053C6.31558 1.8999 5.6812 1.8999 5.29058 2.29053L0.290576 7.29053L0.293701 7.29365Z" fill="#374151"/>
                    </g>
                    <defs>
                      <clipPath id="clip0_454_42">
                        <path d="M0 0H14V16H0V0Z" fill="white"/>
                      </clipPath>
                    </defs>
                  </svg>
                </div>
                <div>ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°</div>
              </div>
            </button>
          </div>
          <div style="display: flex; justify-content: center; align-items: center; font-size: 14px; background-color: white; width: 165px; height: 40px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); border: 1px solid #E5E7EB;">
            <div style="display: flex; align-items: center;">
              <svg width="20" height="16" viewBox="0 0 20 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g clip-path="url(#clip0_194_44)">
                  <path d="M7 8C8.06087 8 9.07828 7.57857 9.82843 6.82843C10.5786 6.07828 11 5.06087 11 4C11 2.93913 10.5786 1.92172 9.82843 1.17157C9.07828 0.421427 8.06087 0 7 0C5.93913 0 4.92172 0.421427 4.17157 1.17157C3.42143 1.92172 3 2.93913 3 4C3 5.06087 3.42143 6.07828 4.17157 6.82843C4.92172 7.57857 5.93913 8 7 8ZM5.57188 9.5C2.49375 9.5 0 11.9937 0 15.0719C0 15.5844 0.415625 16 0.928125 16H13.0719C13.1281 16 13.1813 15.9938 13.2375 15.9844C10.8531 14.2625 10.1187 11.5781 10.0156 9.72812C9.5125 9.57812 8.98125 9.5 8.43125 9.5H5.57188ZM15.2219 7.05312L11.4719 8.55313C11.1875 8.66875 11 8.94375 11 9.25C11 11.2281 11.8094 14.525 15.2125 15.9438C15.3969 16.0219 15.6062 16.0219 15.7906 15.9438C19.1906 14.525 20 11.2281 20 9.25C20 8.94375 19.8125 8.66875 19.5281 8.55313L15.7781 7.05312C15.6 6.98125 15.4 6.98125 15.2219 7.05312ZM18.4813 9.75C18.3594 11.3344 17.6312 13.3969 15.5 14.4281V8.55625L18.4813 9.75Z" fill="#E6002D"/>
                </g>
                <defs>
                  <clipPath id="clip0_194_44">
                    <path d="M0 0H20V16H0V0Z" fill="white"/>
                  </clipPath>
                </defs>
              </svg>
              <div style="margin-left: 10px;">ê´€ë¦¬ì: Admin</div>
            </div>
          </div>
        </div>
      </div>

      <!-- ê¸°ë³¸ ì •ë³´ ì¹´ë“œ -->
      <div style="padding: 25px; margin-top:25px; padding-bottom: 32px; background-color: white; border-radius: 16px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); border: 1px solid #E5E7EB; overflow: hidden;">
        <div style="font-size:20px; color:#2B2F36;">ê¸°ë³¸ ì •ë³´</div>
        <div>
          <!-- ì œëª© -->
          <div style="display: flex; margin-top: 20px;">
            <div>
              <div style="display: flex;"><div style="margin-right: 2px;">ê¸€ ì œëª©</div><div style="color: red;">*</div></div>
              <div>
                <input id="titleInput"
                       type="text"
                       name="doctitle"
                       th:value="${document.doctitle}"
                       placeholder="ê²Œì‹œê¸€ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš” (ìµœëŒ€ 100ì)"
                       style="margin-top: 13px; box-sizing: border-box; outline:none; padding-left:15px; font-size: 16px; width: 1140px; height: 42px; border:1px solid #D1D5DB; border-radius: 6px;">
                <div id="titleCounter" aria-live="polite"
                     style="margin-top:3px; margin-left: 5px; font-size:12px; color:#6B7280;">
                  0 / 100ì
                </div>
              </div>
            </div>
          </div>

          <!-- ì‘ì„±ì / ìƒíƒœ -->
          <div style="display: flex; margin-top: 20px; gap: 25px;">
            <!-- ì‘ì„±ì -->
            <div>
              <div style="display: flex;"><div style="margin-right: 2px;">ì‘ì„±ì</div></div>
              <div>
                <input type="text"
                       name="mid"
                       th:value="${document.mid}"
                       readonly
                       placeholder="ì‘ì„±ìë¥¼ ì…ë ¥í•˜ì„¸ìš”"
                       style="background-color: #F9FAFB; margin-top: 13px; box-sizing: border-box; outline:none; padding-left:15px; font-size: 16px; width: 557px; height: 42px; border:1px solid #D1D5DB; border-radius: 6px;">
              </div>
            </div>

            <!-- ìƒíƒœ(DOCANSWER) -->
            <div>
              <div style="display: flex;"><div style="margin-right: 2px;">ìƒíƒœ</div><div style="color: red;">*</div></div>
              <div>
                <select name="docanswer"
                        style="margin-top: 13px; box-sizing: border-box; outline:none; padding-left:10px; font-size: 14px; width: 557px; height: 42px; border:1px solid #D1D5DB; border-radius: 6px;">
                  <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                  <option value="recv" th:selected="${document.docanswer == 'recv'}">ì ‘ìˆ˜</option>
                  <option value="wait" th:selected="${document.docanswer == 'wait'}">ëŒ€ê¸°</option>
                  <option value="end"  th:selected="${document.docanswer == 'end'}">ë‹µë³€</option>
                </select>
              </div>
            </div>
          </div>

          <!-- ë“±ë¡ì¼(í‘œì‹œìš©) -->
          <div style="display: flex; margin-top: 20px; gap: 25px;">
            <div>
              <div style="display: flex;"><div style="margin-right: 2px;">ë“±ë¡ì¼</div></div>
              <div class="date-range">
                <div class="date-field">
                  <!-- docupdateë¥¼ LocalDateë¡œ ì“°ê³  ìˆìœ¼ë©´ th:valueë¡œ ë§¤í•‘ ê°€ëŠ¥ -->
                  <input type="date"
                         id="startDate"
                         class="date-input"
                         th:value="${document.docupdate}"
                         placeholder="ë“±ë¡ì¼"
                         aria-label="ë“±ë¡ì¼">
                  <button type="button" class="calendar-btn" aria-label="ë‹¬ë ¥ ì—´ê¸°">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                      <path d="M7 3v2M17 3v2M4 8h16M5 21h14a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2H5A2 2 0 0 0 3 7v12a2 2 0 0 0 2 2Z" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
                    </svg>
                  </button>
                </div>
              </div>
            </div>

            <!-- ìœ í˜• ì…€ë ‰íŠ¸: ë³´ì—¬ì£¼ê¸°ìš© (submit ì•ˆ í•¨) -->
            <div>
              <div style="display: flex;"><div style="margin-right: 2px;">ìœ í˜•(ê²Œì‹œíŒ)</div></div>
              <div class="input-suffix" style="margin-top:13px;">
                <select disabled
                        style="box-sizing: border-box; outline:none; padding-left:10px; font-size: 14px; width: 557px; height: 42px; border:1px solid #D1D5DB; border-radius: 6px; background-color:#F9FAFB;">
                  <option th:text="${group + ' / ' + type}">í˜„ì¬ ê²Œì‹œíŒ</option>
                </select>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- ë³¸ë¬¸ ì‘ì„± -->
      <div style="padding: 25px; margin-top:25px; padding-bottom: 32px; background-color: white; border-radius: 16px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); border: 1px solid #E5E7EB; overflow: hidden;">
        <div style="font-size:20px; color:#2B2F36;">ë³¸ë¬¸ ì‘ì„±</div>
        <div>
          <div style="display: flex; margin-top: 20px;">
            <div>
              <div style="display: flex;"><div style="margin-right: 2px;">ë‚´ìš©</div><div style="color: red;">*</div></div>
              <div>
                  <textarea name="doccontent"
                            placeholder="ê²Œì‹œê¸€ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”"
                            style="height: 250px; margin-top: 13px; box-sizing: border-box; outline:none; padding-left:15px; font-size: 16px; width: 1147px; border:1px solid #D1D5DB; border-radius: 6px; background-color: white; resize: none; padding: 15px;"
                            th:text="${document.doccontent}"></textarea>
              </div>
            </div>
          </div>
        </div>

        <!-- ì²¨ë¶€íŒŒì¼: í˜„ì¬ëŠ” DBì˜ DOCFILE ë¬¸ìì—´ë§Œ ìœ ì§€í•˜ë„ë¡ hiddenìœ¼ë¡œ ë³´ê´€ -->
        <input type="hidden" name="docfile" th:value="${document.docfile}"/>

        <div style="margin-top:24px;">
          <div style="margin-bottom:8px; color:#374151;">ì²¨ë¶€íŒŒì¼</div>

          <div id="termsDropzone" class="upload-card" role="button" tabindex="0" aria-label="íŒŒì¼ì„ ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­í•˜ì—¬ ì—…ë¡œë“œ">
            <input id="termsFile" type="file" accept=".pdf,.doc,.docx" hidden>
            <div class="upload-inner">
              <svg width="36" height="36" viewBox="0 0 24 24" aria-hidden="true">
                <path d="M7 18h10a4 4 0 0 0 0-8 5 5 0 0 0-9.6-1.6A4 4 0 0 0 7 18Zm5-3v-6m0 0-3 3m3-3 3 3"
                      fill="none" stroke="#9CA3AF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <div class="upload-title">íŒŒì¼ì„ ì—¬ê¸°ì— ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­í•˜ì—¬ ì—…ë¡œë“œ</div>
              <div class="upload-sub">PDF, DOC, DOCX íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥ (ìµœëŒ€ 10MB)</div>
            </div>
          </div>

          <div id="termsResult" class="upload-result" aria-live="polite">
              <span th:if="${document.docfile != null}">
                í˜„ì¬ íŒŒì¼: <strong th:text="${document.docfile}">íŒŒì¼ëª…</strong>
              </span>
          </div>
        </div>
      </div>

      <!-- í•˜ë‹¨ ë²„íŠ¼ ì˜ì—­ -->
      <div style="padding: 25px; margin-top:25px; background-color: white; border-radius: 16px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); border: 1px solid #E5E7EB; overflow: hidden;">
        <div style="display: flex; gap: 10px; justify-content: space-between;">
          <div>
            <button class="btn-pressable btn-sheen" id="btnPrint"
                    type="button"
                    style="box-sizing: border-box; width: 120px; height: 42px; border:none; border-radius: 8px; cursor: pointer; border:1px solid #D1D5DB; background-color: white;">
              <div style="display: flex; gap: 8px; justify-content: center;">
                <div>
                  <svg width="20" height="18" viewBox="0 0 20 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M6 18C5.45 18 4.97933 17.8043 4.588 17.413C4.19667 17.0217 4.00067 16.5507 4 16V14H2C1.45 14 0.979333 13.8043 0.588 13.413C0.196667 13.0217 0.000666667 12.5507 0 12V8C0 7.15 0.291667 6.43767 0.875 5.863C1.45833 5.28833 2.16667 5.00067 3 5H17C17.85 5 18.5627 5.28767 19.138 5.863C19.7133 6.43833 20.0007 7.15067 20 8V12C20 12.55 19.8043 13.021 19.413 13.413C19.0217 13.805 18.5507 14.0007 18 14H16V16C16 16.55 15.8043 17.021 15.413 17.413C15.0217 17.805 14.5507 18.0007 14 18H6ZM16 4H4V2C4 1.45 4.196 0.979333 4.588 0.588C4.98 0.196667 5.45067 0.000666667 6 0H14C14.55 0 15.021 0.196 15.413 0.588C15.805 0.98 16.0007 1.45067 16 2V4ZM16 9.5C16.2833 9.5 16.521 9.404 16.713 9.212C16.905 9.02 17.0007 8.78267 17 8.5C16.9993 8.21733 16.9033 7.98 16.712 7.788C16.5207 7.596 16.2833 7.5 16 7.5C15.7167 7.5 15.4793 7.596 15.288 7.788C15.0967 7.98 15.0007 8.21733 15 8.5C14.9993 8.78267 15.0953 9.02033 15.288 9.213C15.4807 9.40567 15.718 9.50133 16 9.5ZM6 16H14V12H6V16Z" fill="#374151"/>
                  </svg>
                </div>
                <div>ì¸ì‡„í•˜ê¸°</div>
              </div>
            </button>
          </div>
          <div style="display: flex; gap: 10px;">
            <div>
              <button type="button"
                      onclick="history.back();"
                      class="btn-pressable btn-sheen"
                      style="box-sizing: border-box; width: 65px; height: 42px; border:none; border-radius: 8px; cursor: pointer; border:1px solid #D1D5DB; background-color: white;">
                ì·¨ì†Œ
              </button>
            </div>
            <div>
              <!-- ğŸ”¥ ì‹¤ì œ ìˆ˜ì • ì œì¶œ ë²„íŠ¼ -->
              <button type="submit"
                      class="btn-register"
                      style="gap:6px; box-sizing: border-box; width: 120px; height: 42px; background-color: #D91A1A; color: white; border:none; border-radius: 8px; cursor: pointer;">
                <div style="display: flex; justify-content: center; align-items: center; gap: 8px;">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M14 3V5H5V19H19V10H21V20C21 20.2652 20.8946 20.5196 20.7071 20.7071C20.5196 20.8946 20.2652 21 20 21H4C3.73478 21 3.48043 20.8946 3.29289 20.7071C3.10536 20.5196 3 20.2652 3 20V4C3 3.73478 3.10536 3.48043 3.29289 3.29289C3.48043 3.10536 3.73478 3 4 3H14ZM19.94 3.354L20.647 4.061C20.7407 4.15476 20.7934 4.28192 20.7934 4.4145C20.7934 4.54708 20.7407 4.67424 20.647 4.768L11.314 14.1L9.322 15.08C9.26575 15.1079 9.20217 15.1174 9.14022 15.1072C9.07827 15.0971 9.02107 15.0677 8.97668 15.0233C8.93229 14.9789 8.90295 14.9217 8.89278 14.8598C8.88261 14.7978 8.89213 14.7343 8.92 14.678L9.9 12.686L19.233 3.353C19.3268 3.25926 19.4539 3.20661 19.5865 3.20661C19.7191 3.20661 19.8462 3.25926 19.94 3.353V3.354Z" fill="white"/>
                  </svg>
                  <div>ìˆ˜ì •í•˜ê¸°</div>
                </div>
              </button>
            </div>
          </div>
        </div>
      </div>

    </form>
    <!-- ğŸ”š í¼ ë -->

  </div>
</main>

<div id="bnk-chatbot-container" style="position: fixed; right: 20px; bottom: 20px; z-index: 9999;">
  <div id="bnk-chatbot-slot"></div>
</div>

<!-- ì•„ë˜ ìŠ¤í¬ë¦½íŠ¸ë“¤ì€ ê·¸ëŒ€ë¡œ ìœ ì§€ (ì—…ë¡œë“œ/ì¸ì‡„/ê¸€ììˆ˜ ë“±) -->
<script>
  const startEl = document.getElementById('startDate');
  const endEl   = document.getElementById('endDate');

  [startEl, endEl].forEach(el => {
    if (!el) return;
    el.setAttribute('readonly', 'readonly');
    el.addEventListener('click', (e) => {
      e.preventDefault();
      openPicker(el);
    });
  });

  document.querySelectorAll('.calendar-btn').forEach((btn) => {
    const input = btn.previousElementSibling;
    btn.addEventListener('click', (e) => {
      e.preventDefault();
      openPicker(input);
    });
  });

  function openPicker(input) {
    if (!input) return;

    const wasReadonly = input.hasAttribute('readonly');
    if (wasReadonly) input.removeAttribute('readonly');

    input.focus();
    if (typeof input.showPicker === 'function') {
      input.showPicker();
    } else {
      input.click();
    }

    if (wasReadonly) setTimeout(() => {
      input.setAttribute('readonly', 'readonly');
    }, 200);
  }

  function clampEndMin() {
    if (!startEl || !endEl) return;
    endEl.min = startEl.value || '';
    if (endEl.value && startEl.value && endEl.value < startEl.value) {
      endEl.value = startEl.value;
    }
  }
  startEl && startEl.addEventListener('change', clampEndMin);
</script>

<script>
  (function(){
    const MAX_BYTES = 10 * 1024 * 1024;
    const ALLOW = ['application/pdf',
      'application/msword',
      'application/vnd.openxmlformats-officedocument.wordprocessingml.document'];
    const dropzone = document.getElementById('termsDropzone');
    const input    = document.getElementById('termsFile');
    const result   = document.getElementById('termsResult');

    if (!dropzone || !input || !result) return;

    dropzone.addEventListener('click', () => input.click());
    dropzone.addEventListener('keydown', (e)=>{
      if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); input.click(); }
    });

    ['dragenter','dragover'].forEach(ev =>
            dropzone.addEventListener(ev, (e)=>{ e.preventDefault(); e.dataTransfer.dropEffect='copy'; dropzone.classList.add('is-dragover'); })
    );
    ['dragleave','dragend','drop'].forEach(ev =>
            dropzone.addEventListener(ev, ()=> dropzone.classList.remove('is-dragover'))
    );

    dropzone.addEventListener('drop', (e)=>{
      e.preventDefault();
      const file = e.dataTransfer.files && e.dataTransfer.files[0];
      if (file) setFile(file);
    });

    input.addEventListener('change', ()=>{
      const file = input.files && input.files[0];
      if (file) setFile(file);
    });

    function setFile(file){
      const err = validate(file);
      if (err){
        result.innerHTML = `<div class="error">${err}</div>`;
        input.value = '';
        return;
      }
      const dt = new DataTransfer();
      dt.items.add(file);
      input.files = dt.files;

      result.innerHTML = renderChip(file);
      result.querySelector('.file-remove')?.addEventListener('click', ()=>{
        input.value = '';
        result.textContent = '';
      });
    }

    function validate(file){
      if (!ALLOW.includes(file.type)) {
        const ext = file.name.split('.').pop()?.toLowerCase();
        if (!['pdf','doc','docx'].includes(ext)) return 'í—ˆìš©ë˜ì§€ ì•ŠëŠ” íŒŒì¼ í˜•ì‹ì…ë‹ˆë‹¤. (PDF, DOC, DOCXë§Œ ê°€ëŠ¥)';
      }
      if (file.size > MAX_BYTES) return 'íŒŒì¼ ìš©ëŸ‰ì´ 10MBë¥¼ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤.';
      return '';
    }

    function renderChip(file){
      const size = prettyBytes(file.size);
      return `
          <span class="file-chip">
            <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M4 7a2 2 0 0 1 2-2h7l5 5v7a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V7z"
                    fill="none" stroke="#6B7280" stroke-width="1.4"/>
            </svg>
            <span>${file.name}</span>
            <span class="size">(${size})</span>
            <button type="button" class="file-remove" aria-label="íŒŒì¼ ì œê±°">âœ•</button>
          </span>`;
    }

    function prettyBytes(bytes){
      if (bytes < 1024) return `${bytes} B`;
      if (bytes < 1024*1024) return `${(bytes/1024).toFixed(1)} KB`;
      return `${(bytes/1024/1024).toFixed(1)} MB`;
    }
  })();
</script>

<script>
  (function () {
    const MAX = 100;
    const input   = document.getElementById('titleInput');
    const counter = document.getElementById('titleCounter');
    if (!input || !counter) return;

    const segmenter = (window.Intl && Intl.Segmenter)
            ? new Intl.Segmenter('ko', { granularity: 'grapheme' })
            : null;

    function splitGraphemes(str) {
      if (segmenter) return [...segmenter.segment(str)].map(s => s.segment);
      return Array.from(str);
    }

    let composing = false;

    function update() {
      let parts = splitGraphemes(input.value);
      if (!composing && parts.length > MAX) {
        parts = parts.slice(0, MAX);
        input.value = parts.join('');
      }
      counter.textContent = `${parts.length} / ${MAX}ì`;
    }

    input.addEventListener('compositionstart', () => { composing = true; });
    input.addEventListener('compositionend',   () => { composing = false; update(); });
    input.addEventListener('input', update);
    update();
  })();
</script>

<script>
  (function(){
    const btn = document.getElementById('btnPrint');
    if (!btn) return;
    btn.addEventListener('click', function(){
      window.print();
    });
  })();
</script>

<footer>
  <div th:replace="~{layouts/footer.html}"></div>
</footer>
</body>
</html>
