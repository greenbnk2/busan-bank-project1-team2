<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>stock_order</title>
    <style>
        main {
            background-color: #F6F6F8;
            padding: 10px 20px 80px;
        }
        body {
            background-color: #F6F6F8;
        }
    </style>
    <style>
        /* 탭 공통 스타일 */
        .tab-list {
            list-style: none;
            display: flex;
            padding: 0;
            margin: 0;
        }
        .tab-list li {
            margin-right: 20px;
        }
        .tab-link {
            text-decoration: none;
            color: #444;
            padding-bottom: 6px; /* 밑줄과 간격 맞추기 */
            display: inline-block;
        }
        /* 선택된 탭 스타일 (스크린샷처럼 밑줄) */
        .tab-link.active {
            color: #000;
            font-weight: 500;
        }
        .tabs-wrapper {
            position: relative;
            border-bottom: 1px solid grey;
        }
        .tab-underline {
            position: absolute;
            bottom: 0;
            height: 2px;
            background-color: #000;
            left: 0;
            width: 0;
            transition: left 0.2s ease, width 0.2s ease;
        }

        .stock-row {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr;
            padding: 10px 0;
            border-radius: 12px;
            transition: background-color 0.2s ease;  /* 서서히 변하도록 */
        }
        .stock-row:hover {
            background-color: #ECEFF3;  /* 원하는 회색으로 조절 */
        }
        /* 표 제목 영역 */
        .stock-header {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr;
            margin-top: 20px;
        }
        .circle-badge {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            color: white;
            font-size: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            flex-shrink: 0;
        }
    </style>
    <style>
        .rate-up {
            color: #d60000;   /* 빨간색 */
        }
        .rate-down {
            color: #0051c7;   /* 파란색 */
        }
        .rate-zero {
            color: #555555;   /* 보합 */
        }
    </style>
    <style>
        .stock-table a {
            text-decoration: none;
            color: black;
        }
    </style>
    <style>
        .order-tabs {
            position: relative;
            background: #f3f3f5;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            border-radius: 8px;
            padding: 2px;              /* 안쪽 여백 */
            font-size: 14px;
        }

        .order-tab {
            text-align: center;
            padding: 5px 0;
            margin-top: 2px;
            z-index: 1;                /* 흰 박스보다 위에 보이게 */
            cursor: pointer;
            user-select: none;
        }

        .order-tab.active {
            font-weight: 500;
        }

        .order-tabs-active {
            position: absolute;
            top: 2px;
            bottom: 2px;
            left: 2px;
            border-radius: 6px;
            background: #ffffff;
            z-index: 0;
            transition: left 0.4s ease, width 0.4s ease;
        }
    </style>
    <style>
        .price-tabs {
            position: relative;
            background: #f3f3f5;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            border-radius: 8px;
            padding: 2px;
            font-size: 14px;
            margin-bottom: 14px;
        }

        .price-tab {
            text-align: center;
            padding: 5px 0;
            margin-top: 2px;
            z-index: 1;
            cursor: pointer;
            user-select: none;
        }

        .price-tab.active {
            font-weight: 500;
        }

        .price-tabs-active {
            position: absolute;
            top: 2px;
            bottom: 2px;
            left: 2px;
            border-radius: 6px;
            background: #ffffff;
            z-index: 0;
            transition: left 0.4s ease, width 0.4s ease;
        }
    </style>
    <style>
        .order-section {
            height: 100%;
        }
        .order-section[data-section="wait"] > div {

            display: flex;
            justify-content: center;  /* 가운데 정렬 */
            align-items: center;
            text-align: center;
        }
    </style>
    <style>
        .price-tabs {
            position: relative;
            background: #f3f3f5;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            border-radius: 8px;
            padding: 2px;
            font-size: 14px;
            margin-bottom: 14px;
        }

        .price-tab {
            text-align: center;
            padding: 5px 0;
            margin-top: 2px;
            z-index: 1;
            cursor: pointer;
            user-select: none;
        }

        .price-tab.active {
            font-weight: 500;
        }

        .price-tabs-active {
            position: absolute;
            top: 2px;
            bottom: 2px;
            left: 2px;
            border-radius: 6px;
            background: #ffffff;
            z-index: 0;
            transition: left 0.4s ease, width 0.4s ease;
        }
    </style>
    <style>
        .sell-price-tabs {
            position: relative;
            background: #f3f3f5;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            border-radius: 8px;
            padding: 2px;
            font-size: 14px;
            margin-bottom: 14px;
        }

        .sell-price-tab {
            text-align: center;
            padding: 5px 0;
            margin-top: 2px;
            z-index: 1;
            cursor: pointer;
            user-select: none;
        }

        .sell-price-tab.active {
            font-weight: 500;
        }

        .sell-price-tabs-active {
            position: absolute;
            top: 2px;
            bottom: 2px;
            left: 2px;
            border-radius: 6px;
            background: #ffffff;
            z-index: 0;
            transition: left 0.4s ease, width 0.4s ease;
        }
    </style>
    <style>
        .modal-overlay {
            position: fixed;
            inset: 0;
            display: flex;                 /* 항상 flex, 대신 투명도/포인터로 숨김 */
            align-items: center;
            justify-content: center;
            z-index: 9999;

            opacity: 0;
            /*visibility: hidden;*/
            pointer-events: none;
            transition: opacity 0.25s ease;
        }

        .order-modal {
            width: 460px;
            max-width: calc(100% - 40px);
            background: #ffffff;
            border-radius: 16px;
            padding: 24px 28px 20px;
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.18);
            font-size: 15px;
            color: #222;
        }

        /* 보여줄 때 붙이는 클래스 */
        .modal-overlay.show {
            opacity: 1;
            /*visibility: visible;*/
            pointer-events: auto;
        }

        .order-modal-title {
            font-size: 22px;
            font-weight: 600;
            margin-bottom: 24px;
        }

        .order-modal-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 14px;
        }

        .order-modal-label {
            color: #666;
            font-size: 14px;
        }

        .order-modal-value {
            font-size: 15px;
            font-weight: 500;
        }

        .order-modal-sub {
            font-size: 13px;
            color: #999;
        }

        .order-modal-divider {
            border-top: 1px solid #eee;
            margin: 14px 0 18px;
        }

        .order-modal-bottom {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .order-modal-actions {
            display: flex;
            margin-top: 24px;
            gap: 10px;
        }

        .order-modal-btn {
            flex: 1;
            border-radius: 10px;
            border: none;
            padding: 12px 0;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
        }

        .order-modal-btn-cancel {
            background: #f4f4f5;
            color: #333;
        }

        .order-modal-btn-confirm {
            background: #e6424f;
            color: #ffffff;
        }

        /* 토글 스위치 */
        .modal-switch {
            position: relative;
            width: 46px;
            height: 26px;
            border-radius: 13px;
            background: #e4e4ea;
            display: inline-flex;
            align-items: center;
            padding: 3px;
            box-sizing: border-box;
            cursor: pointer;
        }

        .modal-switch input {
            display: none;
        }

        .modal-switch-slider {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #ffffff;
            transition: transform 0.2s ease;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.25);
        }

        .modal-switch input:checked + .modal-switch-slider {
            transform: translateX(18px);
        }
    </style>
    <style>
        .toast {
            position: fixed;
            top: 16px;
            left: 50%;
            transform: translateX(-50%) translateY(-10px);
            background: #181e27;
            color: #ffffff;
            border-radius: 12px;
            padding: 8px 18px;
            font-size: 14px;
            display: flex;
            align-items: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s ease, transform 0.2s ease;
            z-index: 10000;
            box-shadow: 0 6px 20px rgba(0,0,0,0.4);
        }
        .toast.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }
        .toast-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            background: #22c55e;
            margin-right: 8px;
        }
    </style>
</head>
<body>
<header>
    <div th:replace="~{layouts/header.html}"></div>
</header>

<main>
    <div>
        <div>
            <div class="stock-name">
                <div style="">
                    <div style="font-size: 15px; font-weight: 500;">SK하이닉스</div>
                    <div style="display: flex; align-items: center;">
                        <div style="font-size: 20px; font-weight: 500; ">604,000원</div>
                        <div style="margin-left: 10px;">어제보다<span style="color: #de0000;">&nbsp;+46,000원&nbsp;(+8.21%)</span></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="tabs-wrapper" style="margin-top: 50px; border-bottom: 1px solid grey;">
            <ul class="tab-list" id="subTabs" style="list-style: none; display: flex;">
                <li style=" margin-right: 20px;">
                    <a href="#" class="tab-link active" style="text-decoration: none;color: black;">차트 · 호가</a>
                </li>
                <li style="margin-right: 20px;">
                    <a href="#" class="tab-link" style=" text-decoration: none; color: black;">종목정보</a>
                </li>
                <li>
                    <a href="#" class="tab-link" style=" text-decoration: none; color: black;">뉴스 · 공시</a>
                </li>
            </ul>
            <!-- 검은색 움직이는 밑줄 -->
            <div class="tab-underline" id="subTabsUnderline"></div>
        </div>
        <div style="width: 100%; display: flex;">
            <div style="width: 50%;">
                <div style="box-sizing: border-box; margin-top:25px;border-radius: 16px;background-color: white; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); border: 1px solid #E5E7EB; overflow: hidden; width: 100%; height: 300px;">
                    <div>
                        <div style="color: #13263A; font-size: 20px; margin-bottom: 20px; margin-left: 30px;">
                            차트 넣기
                        </div>
                    </div>
                </div>
                <div style=" box-sizing: border-box;margin-top:10px;border-radius: 16px;background-color: white; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); border: 1px solid #E5E7EB; overflow: hidden; width: 100%; height: 300px;">
                    <div>
                        <div style="color: #13263A; font-size: 20px; margin-bottom: 20px; margin-left: 30px;">
                            시세
                        </div>
                    </div>
                </div>
            </div>
            <div style="box-sizing: border-box;margin-top:25px; margin-left:10px; border-radius: 16px;background-color: white; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); border: 1px solid #E5E7EB; overflow: hidden; width: 30%; height: 610px;">
                <div>
                    <div style="color: #13263A; font-size: 20px; margin-bottom: 20px; margin-left: 30px;">
                        호가
                    </div>
                </div>
            </div>
            <div style="box-sizing: border-box;margin-top:25px; margin-left:10px; border-radius: 16px;background-color: white; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); border: 1px solid #E5E7EB; overflow: hidden; width: 20%; height: 610px;">
                <div>
                    <div style="color: #13263A; margin-bottom: 20px; padding: 15px;">
                        <div style="font-weight: 500; font-size: 14px; margin-bottom: 14px;">주문하기</div>
                        <div class="order-tabs" id="orderTabs">
                            <div class="order-tabs-active" id="orderTabsActive"></div>

                            <div class="order-tab active" data-type="buy">구매</div>
                            <div class="order-tab" data-type="sell">판매</div>
                            <div class="order-tab" data-type="wait">대기</div>
                        </div>
                        <div id="orderContents" style="margin-top: 16px;">
                            <section class="order-section" data-section="buy">
                                        <div style="display: flex; margin-top: 14px; align-items: center; justify-content: space-between;padding-left: 10px; padding-right: 10px;">
                                            <div style="font-weight: 500; font-size: 14px; margin-bottom: 14px;">주문 유형</div>
                                            <div style="font-weight: 500; font-size: 14px; margin-bottom: 14px; width: 75%;">
                                                <select style="outline: none; border:1px solid #e5e8eb; width: 100%; border-radius: 8px; padding-left: 10px; height: 30px;">
                                                    <option value="일반">일반 주문</option>
                                                    <option value="정규장">정규장 주문 예약</option>
                                                    <option value="조건">조건 주문</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div style="display: flex; justify-content: space-between;padding-left: 10px; padding-right: 10px;margin-bottom: 6px;">
                                            <div style="font-weight: 500; font-size: 14px; margin-bottom: 14px;padding-top: 5px;">구매 가격</div>
                                            <div style="font-weight: 500; font-size: 14px; margin-bottom: 8px; width: 75%;">
                                                <div class="price-tabs" id="priceTabs">
                                                    <div class="price-tabs-active" id="priceTabsActive"></div>
                                                    <div class="price-tab active" data-type="limit">지정가</div>
                                                    <div class="price-tab" data-type="market">시장가</div>
                                                </div>
                                                <div style="position:relative;">
                                                    <input type="text" style="width: 91%; outline: none; padding-left:10px; padding-right:10px; border:1px solid #e5e8eb;font-weight: 500; font-size: 14px; border-radius: 8px; height: 30px;">
                                                    <span style="position: absolute; top:50%; right: 10px; transform: translateY(-50%); font-size: 14px; color:#999;">원</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div style="display: flex; justify-content: space-between;padding-left: 10px; padding-right: 10px;">
                                            <div style="font-weight: 500; font-size: 14px; margin-bottom: 14px;padding-top: 5px;">수량</div>
                                            <div style="font-weight: 500; font-size: 14px; margin-bottom: 8px; width: 75%;">
                                                <div style="position: relative;">
                                                    <input type="text" style="width: 91%; outline: none; padding-left:10px; padding-right:10px; border:1px solid #e5e8eb;font-weight: 500; font-size: 14px; border-radius: 8px; height: 30px;">
                                                    <span style="position: absolute; top:50%; right: 10px; transform: translateY(-50%); font-size: 14px; color:#999;">주</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div style="border-top:1px solid #f3f3f5; margin-top: 20px;"></div>
                                        <div style="display: flex; margin-top: 20px; align-items: center; justify-content: space-between;padding-left: 10px; padding-right: 10px;">
                                        <div style="font-weight: 500; font-size: 14px; margin-bottom: 14px;">구매가능 금액</div>
                                        <div style="text-align: end; font-weight: 500; font-size: 14px; margin-bottom: 14px; width: 70%;">
                                            0원
                                        </div>
                                    </div>
                                <div style="display: flex; margin-top: 14px; align-items: center; justify-content: space-between;padding-left: 10px; padding-right: 10px;">
                                    <div style="font-weight: 500; font-size: 14px; margin-bottom: 14px;">총 주문 금액</div>
                                    <div style="text-align: end; font-weight: 500; font-size: 14px; margin-bottom: 14px; width: 75%;">
                                        598,000원
                                    </div>
                                </div>
                                <div style="margin-top: 10px;">
                                    <button type="button" id="openOrderModal" style="cursor: pointer; background: #e6424f; border:none; border-radius: 8px; width: 100%; color: white; padding: 10px; font-size: 18px; font-weight: 700;">구매하기</button>
                                </div>
                            </section>
                            <section class="order-section" data-section="sell" style="display: none;">
                                        <div style="display: flex; margin-top: 14px; align-items: center; justify-content: space-between;padding-left: 10px; padding-right: 10px;">
                                            <div style="font-weight: 500; font-size: 14px; margin-bottom: 14px;">주문 유형</div>
                                            <div style="font-weight: 500; font-size: 14px; margin-bottom: 14px; width: 75%;">
                                                <select style="outline: none; border:1px solid #e5e8eb; width: 100%; border-radius: 8px;padding-left: 10px; height: 30px;">
                                                    <option value="일반">일반 주문</option>
                                                    <option value="정규장">정규장 주문 예약</option>
                                                    <option value="조건">조건 주문</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div style="display: flex; justify-content: space-between;padding-left: 10px; padding-right: 10px;margin-bottom: 6px;">
                                            <div style="font-weight: 500; font-size: 14px; margin-bottom: 14px;padding-top: 5px;">판매 가격</div>
                                            <div style="font-weight: 500; font-size: 14px; margin-bottom: 8px; width: 75%;">
                                                <div class="sell-price-tabs" id="sellPriceTabs">
                                                    <div class="sell-price-tabs-active" id="sellPriceTabsActive"></div>
                                                    <div class="sell-price-tab active" data-type="limit">지정가</div>
                                                    <div class="sell-price-tab" data-type="market">시장가</div>
                                                </div>
                                                <div style="position:relative;">
                                                    <input type="text" style="width: 91%; outline: none; padding-left:10px; padding-right:10px; border:1px solid #e5e8eb;font-weight: 500; font-size: 14px; border-radius: 8px; height: 30px;">
                                                    <span style="position: absolute; top:50%; right: 10px; transform: translateY(-50%); font-size: 14px; color:#999;">원</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div style="display: flex; justify-content: space-between;padding-left: 10px; padding-right: 10px;">
                                            <div style="font-weight: 500; font-size: 14px; margin-bottom: 14px;padding-top: 5px;">수량</div>
                                            <div style="font-weight: 500; font-size: 14px; margin-bottom: 8px; width: 75%;">
                                                <div style="position: relative;">
                                                    <input type="text" style="width: 91%; outline: none; padding-left:10px; padding-right:10px; border:1px solid #e5e8eb;font-weight: 500; font-size: 14px; border-radius: 8px; height: 30px;">
                                                    <span style="position: absolute; top:50%; right: 10px; transform: translateY(-50%); font-size: 14px; color:#999;">주</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div style="border-top:1px solid #f3f3f5; margin-top: 20px;"></div>
                                        <div style="display: flex; margin-top: 20px; align-items: center; justify-content: space-between;padding-left: 10px; padding-right: 10px;">
                                        <div style="font-weight: 500; font-size: 14px; margin-bottom: 14px;">현재 수익</div>
                                        <div style="text-align: end; font-weight: 500; font-size: 14px; margin-bottom: 14px; width: 70%; color: #5184fc;">
                                            -5,100원(-7.2%)
                                        </div>
                                    </div>
                                <div style="display: flex; margin-top: 14px; align-items: center; justify-content: space-between;padding-left: 10px; padding-right: 10px;">
                                    <div style="font-weight: 500; font-size: 14px; margin-bottom: 14px;">총 금액</div>
                                    <div style="text-align: end; font-weight: 500; font-size: 14px; margin-bottom: 14px; width: 75%;">
                                        598,000원
                                    </div>
                                </div>
                                <div style="margin-top: 10px;">
                                    <button id="openSellModal" type="button" style="cursor: pointer; background: #5184fc; border:none; border-radius: 8px; width: 100%; color: white; padding: 10px; font-size: 18px; font-weight: 700;">판매하기</button>
                                </div>
                            </section>
                            <section class="order-section" data-section="wait" style="display: none;">
                                <div style="width: 100%; height: 440px; display: flex; justify-items: center; align-items: center;">
                                    <div style="">
                                        <div>
                                            <svg width="26" height="28" viewBox="0 0 20 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path fill-rule="evenodd" clip-rule="evenodd" d="M5.65785 0.0418114C5.30216 -0.0209313 4.9376 -0.0129925 4.58498 0.0651743C4.23236 0.143341 3.89859 0.290205 3.60273 0.497378C3.30688 0.704551 3.05473 0.967976 2.86069 1.27261C2.66666 1.57724 2.53453 1.91711 2.47185 2.27281L0.0418532 16.0598C-0.0848826 16.778 0.0788577 17.5171 0.497057 18.1146C0.915257 18.7121 1.55366 19.119 2.27185 19.2458L14.0899 21.3298C14.8079 21.4563 15.5468 21.2924 16.144 20.8742C16.7413 20.456 17.148 19.8178 17.2749 19.0998L19.7069 5.31181C19.7696 4.95612 19.7617 4.59156 19.6835 4.23894C19.6053 3.88632 19.4585 3.55255 19.2513 3.25669C19.0441 2.96084 18.7807 2.70869 18.4761 2.51465C18.1714 2.32061 17.8316 2.18848 17.4759 2.12581L5.65785 0.0418114ZM6.93385 4.32881C6.83599 4.30959 6.73527 4.31008 6.6376 4.33026C6.53993 4.35043 6.44727 4.38989 6.36503 4.44631C6.28279 4.50273 6.21263 4.57499 6.15865 4.65885C6.10468 4.74272 6.06797 4.83651 6.05068 4.93473C6.03339 5.03295 6.03586 5.13364 6.05795 5.23089C6.08005 5.32815 6.12131 5.42002 6.17934 5.50113C6.23737 5.58225 6.311 5.65097 6.39591 5.70329C6.48082 5.7556 6.57531 5.79046 6.67385 5.80581L14.5519 7.19581C14.7478 7.23029 14.9495 7.1855 15.1125 7.07129C15.2755 6.95708 15.3864 6.78281 15.4209 6.58681C15.4553 6.39082 15.4105 6.18915 15.2963 6.02618C15.1821 5.86321 15.0078 5.75229 14.8119 5.71781L6.93385 4.32881ZM5.37085 8.87681C5.40548 8.68096 5.51648 8.50687 5.67945 8.39285C5.84241 8.27884 6.04399 8.23422 6.23985 8.26881L14.1179 9.65781C14.2164 9.67317 14.3109 9.70802 14.3958 9.76034C14.4807 9.81265 14.5543 9.88138 14.6124 9.96249C14.6704 10.0436 14.7117 10.1355 14.7338 10.2327C14.7558 10.33 14.7583 10.4307 14.741 10.5289C14.7237 10.6271 14.687 10.7209 14.6331 10.8048C14.5791 10.8886 14.5089 10.9609 14.4267 11.0173C14.3444 11.0737 14.2518 11.1132 14.1541 11.1334C14.0564 11.1535 13.9557 11.154 13.8579 11.1348L5.97885 9.74481C5.7832 9.71018 5.60929 9.59932 5.4953 9.43658C5.38131 9.27384 5.33655 9.07252 5.37085 8.87681ZM5.54485 12.2068C5.44699 12.1876 5.34628 12.1881 5.2486 12.2083C5.15093 12.2284 5.05827 12.2679 4.97603 12.3243C4.89379 12.3807 4.82363 12.453 4.76965 12.5369C4.71567 12.6207 4.67897 12.7145 4.66168 12.8127C4.64439 12.911 4.64686 13.0116 4.66895 13.1089C4.69105 13.2061 4.73231 13.298 4.79034 13.3791C4.84837 13.4602 4.922 13.529 5.00691 13.5813C5.09182 13.6336 5.18631 13.6685 5.28485 13.6838L10.2089 14.5528C10.4048 14.5873 10.6065 14.5425 10.7695 14.4283C10.9325 14.3141 11.0434 14.1398 11.0779 13.9438C11.1123 13.7478 11.0675 13.5462 10.9533 13.3832C10.8391 13.2202 10.6648 13.1093 10.4689 13.0748L5.54485 12.2068Z" fill="#999A9C"/>
                                            </svg>
                                        </div>
                                        <div>대기중인 주문이 없어요</div>
                                    </div>
                                </div>
                            </section>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<footer>
    <div th:replace="~{layouts/footer.html}"></div>
</footer>

<!-- 주문 확인 모달 -->
<div id="orderConfirmModal" class="modal-overlay">
    <div class="order-modal" onclick="event.stopPropagation();">
        <div class="order-modal-title">오라클 구매 1주</div>

        <div class="order-modal-row">
            <div class="order-modal-label">1주 희망가격</div>
            <div class="order-modal-value">10,005원</div>
        </div>

        <div class="order-modal-row">
            <div class="order-modal-label">
                예상 수수료<br>
                <span class="order-modal-sub">구매 수수료 무료</span>
            </div>
            <div class="order-modal-value">0원</div>
        </div>

        <div class="order-modal-row">
            <div class="order-modal-label">총 주문 금액</div>
            <div class="order-modal-value">10,005원</div>
        </div>

        <div class="order-modal-divider"></div>

        <div class="order-modal-bottom">
            <div class="order-modal-label">다음부터 확인창 없이 거래하기</div>
            <label class="modal-switch">
                <input type="checkbox" id="skipConfirm">
                <span class="modal-switch-slider"></span>
            </label>
        </div>

        <div class="order-modal-actions">
            <button id="modalCancelBtn" class="order-modal-btn order-modal-btn-cancel">
                취소
            </button>
            <button id="modalConfirmBtn" class="order-modal-btn order-modal-btn-confirm">
                구매
            </button>
        </div>
    </div>
</div>

<!-- 판매 확인 모달 -->
<div id="sellConfirmModal" class="modal-overlay">
    <div class="order-modal" onclick="event.stopPropagation();">
        <div class="order-modal-title">오라클 판매 1주</div>

        <div class="order-modal-row">
            <div class="order-modal-label">1주 판매가격</div>
            <div class="order-modal-value">10,005원</div>
        </div>

        <div class="order-modal-row">
            <div class="order-modal-label">
                예상 수수료<br>
                <span class="order-modal-sub">판매 수수료 무료</span>
            </div>
            <div class="order-modal-value">0원</div>
        </div>

        <div class="order-modal-row">
            <div class="order-modal-label">총 주문 금액</div>
            <div class="order-modal-value">10,005원</div>
        </div>

        <div class="order-modal-divider"></div>

        <div class="order-modal-bottom">
            <div class="order-modal-label">다음부터 확인창 없이 거래하기</div>
            <label class="modal-switch">
                <input type="checkbox" id="sellSkipConfirm">
                <span class="modal-switch-slider"></span>
            </label>
        </div>

        <div class="order-modal-actions">
            <button id="sellModalCancelBtn"
                    class="order-modal-btn order-modal-btn-cancel">
                취소
            </button>
            <button id="sellModalConfirmBtn"
                    class="order-modal-btn order-modal-btn-confirm"
                    style="background:#5184fc;">
                판매
            </button>
        </div>
    </div>
</div>

<!-- 주문 완료 토스트 -->
<div id="orderToast" class="toast">
    <span class="toast-icon">
        <svg width="14" height="14" viewBox="0 0 14 14" fill="none"
             xmlns="http://www.w3.org/2000/svg">
            <path d="M11.5 4L6 9.5L3.5 7"
                  stroke="white" stroke-width="1.6"
                  stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
    </span>
    <span id="orderToastText">오라클 구매 주문 완료</span>
</div>

<script>
    // 일반 탭 active 처리 (위쪽 탭)
    function initTabs(ulId) {
        const tabList = document.getElementById(ulId);
        if (!tabList) return;

        const links = tabList.querySelectorAll('.tab-link');

        links.forEach(link => {
            link.addEventListener('click', function (e) {
                e.preventDefault();
                links.forEach(l => l.classList.remove('active'));
                this.classList.add('active');
            });
        });
    }

    // 밑줄이 움직이는 탭 처리 (아래쪽 탭)
    function initMovingUnderline(ulId, underlineId) {
        const tabList = document.getElementById(ulId);
        const underline = document.getElementById(underlineId);
        if (!tabList || !underline) return;

        const links = tabList.querySelectorAll('.tab-link');

        // li의 offset 기준으로 밑줄 이동
        function moveUnderline(target) {
            const li = target.parentElement;    // <li>
            underline.style.width = li.offsetWidth + 'px';
            underline.style.left  = li.offsetLeft + 'px';
        }

        // 초기 위치: active 되어있는 탭 기준
        const activeLink = tabList.querySelector('.tab-link.active') || links[0];
        if (activeLink) {
            moveUnderline(activeLink);
        }

        links.forEach(link => {
            link.addEventListener('click', function (e) {
                e.preventDefault();

                // active 처리
                links.forEach(l => l.classList.remove('active'));
                this.classList.add('active');

                // 밑줄 이동
                moveUnderline(this);
            });
        });

        // 리사이즈 시 위치 다시 계산
        window.addEventListener('resize', () => {
            const currentActive = tabList.querySelector('.tab-link.active') || links[0];
            if (currentActive) moveUnderline(currentActive);
        });
    }

    document.addEventListener('DOMContentLoaded', function () {
        // initTabs('marketTabs');                          // 위쪽 탭
        initMovingUnderline('subTabs', 'subTabsUnderline'); // 아래쪽 움직이는 언더라인 탭
    });
</script>
<script>
    function updateTime() {
        const now = new Date();

        const hours = String(now.getHours()).padStart(2, '0');
        const minutes = String(now.getMinutes()).padStart(2, '0');

        const text = `순위·오늘 ${hours}:${minutes} 기준`;

        document.getElementById('timeDisplay').innerText = text;
    }

    document.addEventListener('DOMContentLoaded', function () {
        initTabs('marketTabs');
        initMovingUnderline('subTabs', 'subTabsUnderline');

        updateTime();            // 처음 실행
        setInterval(updateTime, 60 * 1000);  // 1분마다 갱신
    });
</script>
<script>
    function getRandomColor() {
        const colors = ["#1E90FF", "#FF6347", "#6A5ACD", "#2E8B57", "#FF8C00", "#DC143C"];
        return colors[Math.floor(Math.random() * colors.length)];
    }

    function getColorForName(name) {
        const key = `badgeColor_${name}`;

        // 이미 저장된 색이 있다면 그대로 사용
        const stored = localStorage.getItem(key);
        if (stored) return stored;

        // 없으면 새로 생성
        const newColor = getRandomColor();
        localStorage.setItem(key, newColor);
        return newColor;
    }

    function createCircleBadge(text, color) {
        const badge = document.createElement("div");
        badge.className = "circle-badge";
        badge.style.backgroundColor = color;
        badge.textContent = text;
        return badge;
    }

    function initCircleBadges() {
        const names = document.querySelectorAll(".stock-name");

        names.forEach(nameEl => {
            // 색을 결정할 기준 이름 (data-stock-name이 있으면 그 값, 없으면 텍스트)
            const fullName = (nameEl.dataset.stockName || nameEl.innerText).trim();
            const firstChar = fullName.charAt(0);

            // 항상 동일한 색을 가져오거나 생성
            const color = getColorForName(fullName);

            const badge = createCircleBadge(firstChar, color);

            // stock-name 자체를 flex 컨테이너로 만들어서
            // 왼쪽에 뱃지, 오른쪽에 기존 내용(2줄)이 오도록
            nameEl.style.display = "flex";
            nameEl.style.alignItems = "center";

            // 기존 내용은 그대로 둔 채, 맨 앞에 뱃지만 끼워 넣기
            nameEl.insertBefore(badge, nameEl.firstChild);
        });
    }

    document.addEventListener("DOMContentLoaded", function () {
        initCircleBadges();
    });
</script>
<script>
    function initOrderTabs(containerId, activeBoxId) {
        const container = document.getElementById(containerId);
        const activeBox = document.getElementById(activeBoxId);
        if (!container || !activeBox) return;

        const tabs = container.querySelectorAll('.order-tab');

        function moveBox(target) {
            activeBox.style.left = target.offsetLeft + 'px';
            activeBox.style.width = target.offsetWidth + 'px';
        }

        // 초기 위치 (active 된 탭 기준)
        const activeTab = container.querySelector('.order-tab.active') || tabs[0];
        if (activeTab) moveBox(activeTab);

        // 클릭 이벤트
        tabs.forEach(tab => {
            tab.addEventListener('click', function () {
                tabs.forEach(t => t.classList.remove('active'));
                this.classList.add('active');
                moveBox(this);

                // 여기서 this.dataset.type 으로
                // 'buy' / 'sell' / 'wait' 구분해서
                // 실제 주문 타입 로직 연동 가능
            });
        });

        // 리사이즈 시 위치 재계산
        window.addEventListener('resize', () => {
            const current = container.querySelector('.order-tab.active') || tabs[0];
            if (current) moveBox(current);
        });
    }

    document.addEventListener('DOMContentLoaded', function () {
        initOrderTabs('orderTabs', 'orderTabsActive');
    });
</script>
<script>
    function initPriceTabs(containerId, activeBoxId) {
        const container = document.getElementById(containerId);
        const activeBox = document.getElementById(activeBoxId);
        if (!container || !activeBox) return;

        const tabs = container.querySelectorAll('.price-tab');

        function moveBox(target) {
            activeBox.style.left = target.offsetLeft + 'px';
            activeBox.style.width = target.offsetWidth + 'px';
        }

        const activeTab = container.querySelector('.price-tab.active') || tabs[0];
        if (activeTab) moveBox(activeTab);

        tabs.forEach(tab => {
            tab.addEventListener('click', function () {
                tabs.forEach(t => t.classList.remove('active'));
                this.classList.add('active');
                moveBox(this);

                // this.dataset.type → 'limit' 또는 'market'
                // 필요시 주문 로직 연결 가능
            });
        });

        window.addEventListener('resize', () => {
            const current = container.querySelector('.price-tab.active') || tabs[0];
            if (current) moveBox(current);
        });
    }

    document.addEventListener('DOMContentLoaded', function () {
        initPriceTabs('priceTabs', 'priceTabsActive');
    });
</script>
<script>
    function initSellPriceTabs(containerId, activeBoxId) {
        const container = document.getElementById(containerId);
        const activeBox = document.getElementById(activeBoxId);
        if (!container || !activeBox) return;

        const tabs = container.querySelectorAll('.sell-price-tab');

        function moveBox(target) {
            activeBox.style.left = target.offsetLeft + 'px';
            activeBox.style.width = target.offsetWidth + 'px';
        }

        const activeTab = container.querySelector('.sell-price-tab.active') || tabs[0];
        if (activeTab) moveBox(activeTab);

        tabs.forEach(tab => {
            tab.addEventListener('click', function () {
                tabs.forEach(t => t.classList.remove('active'));
                this.classList.add('active');
                moveBox(this);

                // this.dataset.type → 'limit' 또는 'market'
                // 필요시 주문 로직 연결 가능
            });
        });

        window.addEventListener('resize', () => {
            const current = container.querySelector('.sell-price-tab.active') || tabs[0];
            if (current) moveBox(current);
        });
    }

    document.addEventListener('DOMContentLoaded', function () {
        initSellPriceTabs('sellPriceTabs', 'sellPriceTabsActive');
    });
</script>
<script>
    function initOrderTabs(containerId, activeBoxId) {
        const container = document.getElementById(containerId);
        const activeBox = document.getElementById(activeBoxId);
        if (!container || !activeBox) return;

        const tabs = container.querySelectorAll('.order-tab');
        const sections = document.querySelectorAll('.order-section');
        const submitBtn = document.getElementById('orderSubmitBtn');

        function moveBox(target) {
            activeBox.style.left = target.offsetLeft + 'px';
            activeBox.style.width = target.offsetWidth + 'px';
        }

        function showSection(type) {
            sections.forEach(sec => {
                const secType = sec.dataset.section; // buy/sell/wait
                sec.style.display = (secType === type ? 'block' : 'none');
            });

            // 여기서 type별로 데이터 가져오기(API 연동)
            // e.g. fetch(`/api/order/${type}`)
        }

        // 초기 상태
        const activeTab = container.querySelector('.order-tab.active') || tabs[0];
        if (activeTab) {
            moveBox(activeTab);
            showSection(activeTab.dataset.type);
        }

        tabs.forEach(tab => {
            tab.addEventListener('click', function () {
                tabs.forEach(t => t.classList.remove('active'));
                this.classList.add('active');
                moveBox(this);

                const type = this.dataset.type; // buy/sell/wait
                showSection(type);
            });
        });

        window.addEventListener('resize', () => {
            const current = container.querySelector('.order-tab.active') || tabs[0];
            if (current) moveBox(current);
        });
    }

    document.addEventListener('DOMContentLoaded', function () {
        initOrderTabs('orderTabs', 'orderTabsActive');
    });
</script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        // === 구매 모달 ===
        const openBtn    = document.getElementById('openOrderModal');   // 구매하기 버튼
        const modal      = document.getElementById('orderConfirmModal');
        const cancelBtn  = document.getElementById('modalCancelBtn');
        const confirmBtn = document.getElementById('modalConfirmBtn');

        if (openBtn && modal) {
            openBtn.addEventListener('click', function () {
                modal.classList.add('show');       // 서서히 나타남
            });

            // 오버레이 클릭 시 닫기
            modal.addEventListener('click', function () {
                modal.classList.remove('show');    // 서서히 사라짐
            });
        }


        if (cancelBtn && modal) {
            cancelBtn.addEventListener('click', function (e) {
                e.stopPropagation();
                modal.classList.remove('show');
            });
        }

        if (confirmBtn && modal) {
            confirmBtn.addEventListener('click', function (e) {
                e.stopPropagation();
                // TODO: 실제 구매 주문 로직

                modal.classList.remove('show');
                showOrderToast('오라클 구매 주문 완료');
            });
        }

        // === 판매 모달 ===
        const openSellBtn    = document.getElementById('openSellModal');   // 판매하기 버튼
        const sellModal      = document.getElementById('sellConfirmModal');
        const sellCancelBtn  = document.getElementById('sellModalCancelBtn');
        const sellConfirmBtn = document.getElementById('sellModalConfirmBtn');

        if (openSellBtn && sellModal) {
            openSellBtn.addEventListener('click', function () {
                sellModal.classList.add('show');
            });

            sellModal.addEventListener('click', function () {
                sellModal.classList.remove('show');
            });
        }

        if (sellCancelBtn && sellModal) {
            sellCancelBtn.addEventListener('click', function (e) {
                e.stopPropagation();
                sellModal.classList.remove('show');
            });
        }

        if (sellConfirmBtn && sellModal) {
            sellConfirmBtn.addEventListener('click', function (e) {
                e.stopPropagation();
                // TODO: 실제 판매 주문 로직

                sellModal.classList.remove('show');
                showOrderToast('오라클 판매 주문 완료');
            });
        }
    });
</script>

<script>
    function showOrderToast(message) {
        const toast = document.getElementById('orderToast');
        const text  = document.getElementById('orderToastText');
        if (!toast || !text) return;

        text.textContent = message;
        toast.classList.add('show');

        // 이전 타이머가 있으면 제거
        clearTimeout(window._orderToastTimer);
        window._orderToastTimer = setTimeout(function () {
            toast.classList.remove('show');
        }, 1300); // 1.3초 후 사라짐
    }
</script>
</body>
</html>